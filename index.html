<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ohio Rate Watch ‚Äî Stop Overpaying for Natural Gas</title>
<meta name="description" content="Ohio law lets you choose your natural gas supplier. Compare PUCO certified rates, understand your bill, and get free alerts when rates change.">
<link rel="canonical" href="https://ohioratewatch.com/">
<!-- Open Graph -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://ohioratewatch.com/">
<meta property="og:title" content="Ohio Rate Watch ‚Äî Stop Overpaying for Natural Gas">
<meta property="og:description" content="Free tool to compare Ohio natural gas supplier rates. PUCO-sourced data, updated daily. No commissions. Sorted by price only.">
<meta property="og:image" content="https://ohioratewatch.com/og-image.png">
<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Ohio Rate Watch ‚Äî Stop Overpaying for Natural Gas">
<meta name="twitter:description" content="Free tool to compare Ohio natural gas supplier rates. PUCO-sourced data, updated daily. No commissions.">
<meta name="twitter:image" content="https://ohioratewatch.com/og-image.png">
<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Ohio Rate Watch",
  "url": "https://ohioratewatch.com",
  "description": "Free tool to compare Ohio natural gas supplier rates. PUCO-sourced, updated daily. No commissions.",
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "Web",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
  "provider": { "@type": "Organization", "name": "EJ Systems LLC", "url": "https://ohioratewatch.com" },
  "areaServed": { "@type": "State", "name": "Ohio" }
}
</script>
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f8f9fa; color: #1a1a2e; }

  /* NAV */
  nav { background: #fff; border-bottom: 2px solid #e8f4f8; padding: 0 24px; display: flex; align-items: center; justify-content: space-between; height: 64px; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
  .logo { font-size: 1.3rem; font-weight: 800; color: #1565c0; letter-spacing: -0.5px; }
  .logo span { color: #e53935; }
  nav a { color: #555; text-decoration: none; font-size: 0.9rem; font-weight: 500; }
  nav a:hover { color: #1565c0; }

  /* HERO */
  .hero { background: linear-gradient(135deg, #1565c0 0%, #0d47a1 100%); color: #fff; padding: 72px 24px 80px; text-align: center; }
  .hero .badge { display: inline-block; background: rgba(255,255,255,0.15); border: 1px solid rgba(255,255,255,0.3); padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; letter-spacing: 0.5px; margin-bottom: 20px; text-transform: uppercase; }
  .hero h1 { font-size: clamp(2rem, 5vw, 3.2rem); font-weight: 900; line-height: 1.15; max-width: 780px; margin: 0 auto 20px; }
  .hero h1 em { color: #ffcc02; font-style: normal; }
  .hero p { font-size: 1.15rem; opacity: 0.9; max-width: 560px; margin: 0 auto 36px; line-height: 1.6; }
  .signup-form { display: flex; gap: 10px; max-width: 480px; margin: 0 auto; flex-wrap: wrap; justify-content: center; }
  .signup-form input { flex: 1; min-width: 180px; padding: 14px 18px; border: none; border-radius: 8px; font-size: 1rem; outline: none; box-shadow: 0 2px 12px rgba(0,0,0,0.15); }
  .signup-form input.zip { max-width: 110px; min-width: 90px; flex: 0 0 110px; }
  .signup-form button { background: #ffcc02; color: #1a1a2e; border: none; padding: 14px 24px; border-radius: 8px; font-size: 1rem; font-weight: 700; cursor: pointer; white-space: nowrap; transition: background 0.2s; }
  .signup-form button:hover { background: #f9a825; }
  .signup-form button:disabled { opacity: 0.6; cursor: not-allowed; }
  .hero .subtext { font-size: 0.82rem; opacity: 0.7; margin-top: 12px; }
  .form-success { color: #a5d6a7; font-weight: 600; margin-top: 12px; font-size: 0.95rem; }
  .form-error { color: #ef9a9a; font-weight: 600; margin-top: 12px; font-size: 0.95rem; }

  /* STAT BAR */
  .stats { background: #fff; border-bottom: 1px solid #e0e0e0; display: flex; justify-content: center; flex-wrap: wrap; }
  .stat { padding: 20px 40px; text-align: center; border-right: 1px solid #e0e0e0; }
  .stat:last-child { border-right: none; }
  .stat-num { font-size: 1.8rem; font-weight: 900; color: #1565c0; }
  .stat-label { font-size: 0.8rem; color: #777; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }

  /* SECTIONS */
  section { max-width: 1000px; margin: 0 auto; padding: 56px 24px; }
  section h2 { font-size: 1.7rem; font-weight: 800; margin-bottom: 8px; color: #1a1a2e; }
  section .subtitle { color: #666; margin-bottom: 28px; font-size: 1rem; }
  .updated { font-size: 0.78rem; color: #999; margin-bottom: 20px; }
  .live-dot { display: inline-block; width: 7px; height: 7px; background: #22c55e; border-radius: 50%; margin-right: 5px; vertical-align: middle; }

  /* ALERT STRIP */
  .alert-strip { background: #fff3cd; border: 1px solid #ffc107; border-radius: 8px; padding: 12px 18px; font-size: 0.88rem; color: #856404; margin-bottom: 20px; display: flex; gap: 10px; align-items: center; }

  /* UTILITY TABS */
  .tabs { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 24px; }
  .tab { padding: 8px 18px; border-radius: 20px; border: 2px solid #e0e0e0; background: #fff; font-size: 0.85rem; font-weight: 600; cursor: pointer; color: #555; transition: all 0.15s; }
  .tab.active { background: #1565c0; color: #fff; border-color: #1565c0; }

  /* RATE CARD */
  .rate-card { background: #fff; border-radius: 14px; box-shadow: 0 2px 20px rgba(0,0,0,0.08); overflow: hidden; margin-bottom: 12px; }
  .rate-card-header { background: #1565c0; color: #fff; padding: 16px 24px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 8px; }
  .rate-card-header h3 { font-size: 1rem; font-weight: 700; }
  .sco-badge { background: rgba(255,255,255,0.2); padding: 4px 12px; border-radius: 12px; font-size: 0.82rem; font-weight: 600; }
  .sco-sub { font-size: 0.72rem; opacity: 0.75; }

  /* RATE TYPE EXPLAINER */
  .rate-type-explainer { display: flex; gap: 12px; padding: 14px 20px; background: #f9fafb; border-bottom: 1px solid #f0f0f0; }
  .rte-box { flex: 1; padding: 10px 14px; border-radius: 8px; font-size: 0.78rem; line-height: 1.5; }
  .rte-box.fixed { background: #eff6ff; border: 1px solid #bfdbfe; }
  .rte-box.variable { background: #fff7ed; border: 1px solid #fed7aa; }
  .rte-box strong { display: block; margin-bottom: 4px; font-size: 0.8rem; }
  .rte-box.fixed strong { color: #1d4ed8; }
  .rte-box.variable strong { color: #c2410c; }
  .rte-box p { color: #4b5563; }

  /* RATE SECTIONS */
  .rate-section-label { padding: 10px 20px 6px; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.6px; border-top: 2px solid #f0f0f0; }
  .rate-section-label.fixed { color: #1d4ed8; background: #f8fbff; }
  .rate-section-label.variable { color: #c2410c; background: #fffbf7; border-top-color: #fed7aa; }

  /* RATE TABLE */
  .rate-table { width: 100%; border-collapse: collapse; }
  .rate-table th { text-align: left; padding: 8px 16px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.5px; color: #9ca3af; border-bottom: 1px solid #f0f0f0; }
  .rate-table th.center { text-align: center; }
  .rate-table td { padding: 13px 16px; border-bottom: 1px solid #f5f5f5; font-size: 0.9rem; vertical-align: middle; }
  .rate-table tr:last-child td { border-bottom: none; }
  .rate-table tr:hover td { background: #fafbff; }
  .rate-table tr.var-row td { background: #fffbf7; }
  .rate-table tr.var-row:hover td { background: #fff3e8; }
  .rate-table tr.promo-row td { background: #fffbeb !important; }
  .price { font-weight: 700; font-size: 1rem; color: #16a34a; }
  .price-high { color: #c62828; }
  .savings-pill { display: inline-block; background: #dcfce7; color: #14532d; font-size: 0.65rem; font-weight: 700; border-radius: 8px; padding: 2px 6px; margin-left: 6px; }
  .pill { display: inline-block; padding: 3px 9px; border-radius: 10px; font-size: 0.7rem; font-weight: 600; }
  .pill-fixed { background: #dbeafe; color: #1e40af; }
  .pill-variable { background: #ffedd5; color: #c2410c; }
  .pill-default { background: #fee2e2; color: #b91c1c; }
  .center-cell { text-align: center; }
  .fee-free { color: #16a34a; font-weight: 600; font-size: 0.85rem; }
  .fee-charged { color: #dc2626; font-weight: 600; font-size: 0.85rem; }
  .flag-promo { display: inline-block; background: #fef3c7; color: #92400e; font-size: 0.65rem; font-weight: 700; border-radius: 6px; padding: 2px 7px; margin-top: 3px; }
  .flag-intro { display: inline-block; background: #e0f2fe; color: #0369a1; font-size: 0.65rem; font-weight: 700; border-radius: 6px; padding: 2px 7px; margin-top: 3px; }
  .flag-green { display: inline-block; background: #dcfce7; color: #166534; font-size: 0.65rem; font-weight: 700; border-radius: 6px; padding: 2px 7px; margin-top: 3px; }
  .flag-bundle { display: inline-block; background: #fce7f3; color: #9d174d; font-size: 0.65rem; font-weight: 700; border-radius: 6px; padding: 2px 7px; margin-top: 3px; }
  .more-row td { text-align: center; padding: 10px; font-size: 0.8rem; color: #3b82f6; font-weight: 600; cursor: pointer; border-top: 1px solid #f0f0f0; }
  .disclaimer { font-size: 0.75rem; color: #9ca3af; margin-top: 8px; margin-bottom: 32px; }

  /* ===== BILL EXPLAINER ===== */
  .bill-section { background: #fff; margin: 0; max-width: 100%; padding: 56px 24px; }
  .bill-inner { max-width: 1000px; margin: 0 auto; }
  .bill-inner h2 { font-size: 1.7rem; font-weight: 800; margin-bottom: 8px; color: #1a1a2e; }
  .bill-inner .subtitle { color: #666; margin-bottom: 32px; font-size: 1rem; }

  .bill-columns { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 28px; }
  @media (max-width: 700px) { .bill-columns { grid-template-columns: 1fr; } }

  .bill-col { border-radius: 14px; overflow: hidden; border: 2px solid transparent; }
  .bill-col.delivery { border-color: #bfdbfe; }
  .bill-col.supply { border-color: #bbf7d0; }

  .bill-col-header { padding: 14px 20px; font-size: 0.85rem; font-weight: 700; display: flex; align-items: center; gap: 10px; }
  .bill-col-header .badge-lock { background: #1e40af; color: white; font-size: 0.7rem; padding: 2px 9px; border-radius: 10px; }
  .bill-col-header .badge-change { background: #16a34a; color: white; font-size: 0.7rem; padding: 2px 9px; border-radius: 10px; }
  .bill-col.delivery .bill-col-header { background: #eff6ff; color: #1e3a8a; }
  .bill-col.supply .bill-col-header { background: #f0fdf4; color: #14532d; }

  .bill-line { display: flex; justify-content: space-between; align-items: flex-start; padding: 10px 20px; border-bottom: 1px solid #f3f4f6; font-size: 0.85rem; gap: 12px; }
  .bill-line:last-child { border-bottom: none; }
  .bill-line-name { color: #374151; line-height: 1.4; }
  .bill-line-sub { font-size: 0.72rem; color: #9ca3af; margin-top: 2px; }
  .bill-line-amount { font-weight: 700; white-space: nowrap; color: #111827; }
  .bill-total { display: flex; justify-content: space-between; padding: 12px 20px; font-weight: 800; font-size: 0.95rem; margin-top: 2px; }
  .bill-col.delivery .bill-total { background: #eff6ff; color: #1e3a8a; border-top: 2px solid #bfdbfe; }
  .bill-col.supply .bill-total { background: #f0fdf4; color: #14532d; border-top: 2px solid #bbf7d0; }

  .bill-insight { background: linear-gradient(135deg, #fefce8, #fef3c7); border: 2px solid #fbbf24; border-radius: 12px; padding: 20px 24px; display: flex; gap: 16px; align-items: flex-start; margin-bottom: 24px; }
  .bill-insight-icon { font-size: 1.6rem; flex-shrink: 0; margin-top: 2px; }
  .bill-insight-text h4 { font-size: 1rem; font-weight: 800; color: #78350f; margin-bottom: 6px; }
  .bill-insight-text p { font-size: 0.88rem; color: #78350f; line-height: 1.55; }

  .riders-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-top: 24px; }
  .rider-card { background: #f8f9fa; border-radius: 10px; padding: 14px 16px; border-left: 3px solid #bfdbfe; }
  .rider-card h5 { font-size: 0.78rem; font-weight: 700; color: #1e3a8a; margin-bottom: 5px; }
  .rider-card p { font-size: 0.74rem; color: #6b7280; line-height: 1.45; }
  .rider-amount { font-size: 0.7rem; font-weight: 700; color: #374151; margin-top: 4px; }

  /* HOW IT WORKS */
  .steps { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 24px; margin-top: 32px; }
  .step { background: #fff; border-radius: 12px; padding: 28px 24px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
  .step-num { width: 40px; height: 40px; background: #1565c0; color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 1.1rem; margin-bottom: 16px; }
  .step h4 { font-size: 1rem; font-weight: 700; margin-bottom: 8px; }
  .step p { font-size: 0.88rem; color: #666; line-height: 1.5; }

  /* MISSION */
  .mission { background: linear-gradient(135deg, #fff8e1, #fff3e0); border-left: 4px solid #ffcc02; border-radius: 0 12px 12px 0; padding: 28px 32px; }
  .mission h3 { font-size: 1.1rem; font-weight: 800; margin-bottom: 10px; color: #e65100; }
  .mission p { color: #555; line-height: 1.65; font-size: 0.95rem; }

  /* FAQ / LEARN SECTION */
  .faq-section { background: #fff; margin: 0; max-width: 100%; padding: 56px 24px; border-top: 1px solid #e5e7eb; }
  .faq-inner { max-width: 800px; margin: 0 auto; }
  .faq-inner h2 { font-size: 1.7rem; font-weight: 800; margin-bottom: 8px; color: #1a1a2e; }
  .faq-inner .subtitle { color: #666; font-size: 1rem; margin-bottom: 32px; }
  .faq-item { border: 1px solid #e5e7eb; border-radius: 12px; margin-bottom: 10px; overflow: hidden; }
  .faq-q { display: flex; justify-content: space-between; align-items: center; padding: 18px 22px; cursor: pointer; font-size: 0.95rem; font-weight: 700; color: #111827; background: #fff; user-select: none; gap: 16px; transition: background 0.15s; }
  .faq-q:hover { background: #f9fafb; }
  .faq-q .faq-icon { font-size: 1.1rem; color: #1565c0; flex-shrink: 0; transition: transform 0.2s; }
  .faq-item.open .faq-icon { transform: rotate(45deg); }
  .faq-a { display: none; padding: 0 22px 18px; font-size: 0.88rem; color: #4b5563; line-height: 1.7; border-top: 1px solid #f3f4f6; background: #fafafa; }
  .faq-item.open .faq-a { display: block; }
  .faq-a p { margin-top: 14px; }
  .faq-a ul { margin: 10px 0 0 18px; }
  .faq-a li { margin-bottom: 6px; }
  .faq-tag { display: inline-block; padding: 2px 8px; border-radius: 8px; font-size: 0.68rem; font-weight: 700; margin-left: 8px; vertical-align: middle; }
  .faq-tag.blue { background: #dbeafe; color: #1e40af; }
  .faq-tag.orange { background: #ffedd5; color: #c2410c; }
  .faq-tag.green { background: #dcfce7; color: #166534; }

  /* 811 CALLOUT */
  .callout-811 { background: #fff; border-top: 3px solid #e5e7eb; border-bottom: 3px solid #e5e7eb; color: #374151; padding: 24px 32px; display: flex; align-items: center; justify-content: center; gap: 24px; flex-wrap: wrap; font-size: 0.85rem; }
  .callout-811 strong { color: #111827; font-size: 1rem; }
  .callout-811-text { max-width: 500px; line-height: 1.6; }

  /* FOOTER CTA */
  .footer-cta { background: #1565c0; color: #fff; padding: 56px 24px; text-align: center; }
  .footer-cta h2 { font-size: 1.8rem; margin-bottom: 12px; color: #fff; }
  .footer-cta p { opacity: 0.85; margin-bottom: 28px; max-width: 480px; margin-left: auto; margin-right: auto; }

  /* FOOTER */
  footer { background: #111827; color: #9ca3af; padding: 28px 24px; text-align: center; font-size: 0.82rem; line-height: 1.8; }
  footer strong { color: #fff; }
  footer a { color: #60a5fa; text-decoration: none; }

.tab-btn {
  background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 8px;
  padding: 8px 14px; font-size: 0.88rem; font-weight: 600; cursor: pointer;
  transition: all 0.15s;
}
.tab-btn:hover { background: #e5e7eb; }
.tab-btn.active { background: #1565c0; color: #fff; border-color: #1565c0; }
.rc-pill {
  background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 20px;
  padding: 5px 14px; font-size: 0.82rem; font-weight: 600; cursor: pointer;
  transition: all 0.15s;
}
.rc-pill:hover { background: #e5e7eb; }
.rc-pill.active { background: #1e40af; color: #fff; border-color: #1e40af; }

/* Unit toggle pill */
.unit-toggle-pill { display:inline-flex;align-items:center;background:#f3f4f6;border:1px solid #d1d5db;border-radius:20px;padding:2px 3px;gap:0;vertical-align:middle; }
.utp-btn { background:none;border:none;padding:3px 9px;border-radius:16px;font-size:0.72rem;font-weight:700;cursor:pointer;color:#6b7280;transition:all 0.15s;line-height:1; }
.utp-btn.active { background:#1565c0;color:#fff; }
.utp-sep { color:#d1d5db;font-size:0.65rem;padding:0 1px; }
</style>
</head>
<body>

<nav>
  <a href="/" class="logo" style="text-decoration:none;">Ohio<span>Rate</span>Watch <span style="font-size:0.55rem;background:#f59e0b;color:#fff;padding:2px 7px;border-radius:20px;font-weight:700;letter-spacing:0.5px;vertical-align:middle;">BETA</span></a>
  <div style="display:flex;gap:20px;align-items:center;">
    <a href="/learn" style="color:#555;text-decoration:none;font-size:0.9rem;font-weight:500;">Learn</a>
    <a href="/methodology" style="color:#555;text-decoration:none;font-size:0.9rem;font-weight:500;">About</a>
    <a href="/calculator" style="color:#555;text-decoration:none;font-size:0.9rem;font-weight:500;">Calculator</a>
    <a href="#signup" style="color:#1565c0;font-weight:600;text-decoration:none;font-size:0.9rem;border:1.5px solid #1565c0;padding:6px 14px;border-radius:6px;">Get Free Alerts</a>
  </div>
</nav>

<!-- HERO -->
<div class="hero">
  <div class="badge">üîî Free Rate Alerts ¬∑ Ohio Natural Gas</div>
  <h1>Stop paying <em>double</em> for<br>your natural gas.</h1>
  <p>Ohio law gives you the right to choose your natural gas supplier. Most people don't know ‚Äî and pay far more than they have to. We watch the rates so you don't have to.</p>
  <form class="signup-form" id="hero-form">
    <input type="email" id="hero-email" placeholder="Your email address" required>
    <input type="text" class="zip" id="hero-zip" placeholder="Zip code" maxlength="5">
    <input type="number" step="0.001" min="0" max="5" id="hero-rate" placeholder="Current rate $/ccf" style="max-width:140px;min-width:120px;flex:0 0 140px;" title="Your gas supply rate ($/ccf) ‚Äî find it on your bill">
    <button type="submit" id="hero-btn">Get Free Alerts ‚Üí</button>
  </form>
  <div id="hero-msg"></div>
  <div class="subtext">Free forever ¬∑ No spam ¬∑ Unsubscribe anytime</div>
</div>

<!-- COMPACT SAVINGS CALCULATOR -->
<section id="calculator" style="background:#f8f9fa;border-top:1px solid #e5e7eb;border-bottom:1px solid #e5e7eb;padding:0 24px;">
  <div style="max-width:1000px;margin:0 auto;">

    <!-- Timing tip banner -->
    <div style="background:#eff6ff;border-bottom:1px solid #bfdbfe;padding:10px 0;font-size:0.82rem;color:#1e40af;line-height:1.5;">
      üí° <strong>Timing tip:</strong> Supplier switches take 1‚Äì2 billing cycles. For gas, the best time to lock in is September‚ÄìOctober ‚Äî before winter bills hit. <a href="/learn#when-to-switch" style="color:#1565c0;font-weight:600;">Learn more ‚Üí</a>
    </div>

    <div style="padding:40px 0;">
      <h2 style="font-size:1.4rem;font-weight:800;color:#111;margin:0 0 6px;">How Much Could You Save?</h2>
      <p style="color:#6b7280;font-size:0.93rem;margin:0 0 24px;">Enter your rate and usage ‚Äî see your savings instantly.</p>

      <div id="calc-inputs" style="display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:24px;">

        <!-- Territory -->
        <div>
          <label for="calc-territory" style="display:block;font-size:0.8rem;font-weight:600;color:#374151;margin-bottom:6px;text-transform:uppercase;letter-spacing:0.4px;">Territory</label>
          <select id="calc-territory" style="width:100%;padding:9px 12px;border:1.5px solid #d1d5db;border-radius:8px;font-size:0.93rem;background:#fff;color:#111;cursor:pointer;height:42px;box-sizing:border-box;">
            <option value="8">Columbia Gas (default)</option>
            <option value="1">Enbridge Gas Ohio</option>
            <option value="11">CenterPoint Energy</option>
            <option value="10">Duke Energy Ohio</option>
          </select>
        </div>

        <!-- Current Rate -->
        <div>
          <label for="calc-rate-num" style="display:block;font-size:0.8rem;font-weight:600;color:#374151;margin-bottom:6px;text-transform:uppercase;letter-spacing:0.4px;">Your rate (<span id="calc-rate-unit-label">$/ccf</span>) <span class="unit-toggle-pill" style="text-transform:none;"><button data-unit-toggle="ccf" onclick="setUnit('ccf')" class="utp-btn active">CCF</button><span class="utp-sep">|</span><button data-unit-toggle="mcf" onclick="setUnit('mcf')" class="utp-btn">MCF</button></span></label>
          <input type="number" id="calc-rate-num" min="0.40" max="1.50" step="0.01" value="0.85"
            style="width:100%;padding:9px 12px;border:1.5px solid #d1d5db;border-radius:8px;font-size:0.93rem;color:#111;box-sizing:border-box;height:42px;">
          <input type="range" id="calc-rate-slider" min="0.40" max="1.50" step="0.01" value="0.85"
            style="width:100%;margin-top:8px;accent-color:#1565c0;">
        </div>

        <!-- Monthly Usage -->
        <div>
          <label for="calc-usage-num" style="display:block;font-size:0.8rem;font-weight:600;color:#374151;margin-bottom:6px;text-transform:uppercase;letter-spacing:0.4px;">Usage (ccf/mo)</label>
          <input type="number" id="calc-usage-num" min="10" max="200" step="5" value="50"
            style="width:100%;padding:9px 12px;border:1.5px solid #d1d5db;border-radius:8px;font-size:0.93rem;color:#111;box-sizing:border-box;height:42px;">
          <input type="range" id="calc-usage-slider" min="10" max="200" step="5" value="50"
            style="width:100%;margin-top:8px;accent-color:#1565c0;">
        </div>

      </div>

      <!-- Result Card -->
      <div id="calc-result" style="background:#fff;border:1.5px solid #e5e7eb;border-radius:12px;padding:20px 24px;min-height:72px;">
        <div id="calc-result-inner" style="color:#6b7280;font-size:0.9rem;">Loading rate data‚Ä¶</div>
      </div>
    </div>

  </div>
</section>

<script>
(function() {
  const TERRITORY_NAMES = { 8:'Columbia Gas', 1:'Enbridge Gas Ohio', 11:'CenterPoint Energy', 10:'Duke Energy Ohio' };
  const calcCache = {};
  let calcDebounce = null;

  function syncPair(numEl, sliderEl) {
    numEl.addEventListener('input', () => { sliderEl.value = numEl.value; scheduleCalc(); });
    sliderEl.addEventListener('input', () => { numEl.value = sliderEl.value; scheduleCalc(); });
  }

  syncPair(document.getElementById('calc-rate-num'), document.getElementById('calc-rate-slider'));
  syncPair(document.getElementById('calc-usage-num'), document.getElementById('calc-usage-slider'));
  document.getElementById('calc-territory').addEventListener('change', scheduleCalc);

  function scheduleCalc() {
    clearTimeout(calcDebounce);
    calcDebounce = setTimeout(runCalc, 150);
  }

  async function getBestFixed(tid) {
    if (calcCache[tid]) return calcCache[tid];
    // Reuse ratesCache from main page if available and already fetched
    const mainKey = tid + '-1';
    if (typeof ratesCache !== 'undefined' && ratesCache[mainKey]) {
      calcCache[tid] = ratesCache[mainKey];
      return calcCache[tid];
    }
    try {
      const r = await fetch('/api/rates?territory=' + tid + '&category=NaturalGas&rateCode=1');
      calcCache[tid] = await r.json();
    } catch(e) {
      calcCache[tid] = null;
    }
    return calcCache[tid];
  }

  async function runCalc() {
    const tid = parseInt(document.getElementById('calc-territory').value);
    const myRateInput = parseFloat(document.getElementById('calc-rate-num').value);
    // Always work in CCF internally; if MCF mode, input is in MCF so divide by 10
    const myRate = (window.UNIT === 'mcf') ? myRateInput / 10 : myRateInput;
    const usage = parseFloat(document.getElementById('calc-usage-num').value);
    const inner = document.getElementById('calc-result-inner');
    inner.textContent = 'Calculating‚Ä¶';

    const data = await getBestFixed(tid);
    if (!data || !data.suppliers) {
      inner.innerHTML = '<span style="color:#dc2626;">Could not load rate data. Please try again later.</span>';
      return;
    }

    const fixed = (data.suppliers || [])
      .filter(s => s.price && s.price > 0 && s.rateType === 'fixed' && !s.introPrice &&
        !/bundle|electric.*gas|gas.*electric/i.test((s.offerDetails||'') + ' ' + (s.promoDetails||'')))
      .sort((a, b) => a.price - b.price);

    if (!fixed.length) {
      inner.innerHTML = '<span style="color:#6b7280;">No fixed-rate plans available for this territory right now.</span>';
      return;
    }

    const best = fixed[0];
    const saveMo = (myRate - best.price) * usage;
    const saveYr = saveMo * 12;
    const savePct = Math.round((1 - best.price / myRate) * 100);

    const calcUnit = window.UNIT || 'ccf';
    const bestDisplayPx = calcUnit === 'mcf' ? '$' + (best.price * 10).toFixed(2) + '/mcf' : '$' + best.price.toFixed(3) + '/ccf';
    if (saveMo <= 0) {
      inner.innerHTML =
        '<strong style="font-size:1rem;color:#111;">Best available plan: ' + best.name + ' at ' + bestDisplayPx + '</strong><br>' +
        '<span style="color:#6b7280;font-size:0.88rem;margin-top:4px;display:inline-block;">You\'re already on a competitive rate.</span><br>' +
        '<span style="font-size:0.85rem;margin-top:10px;display:inline-block;">' +
        '<a href="#rates" style="color:#1565c0;font-weight:600;text-decoration:none;">See all plans ‚Üì</a>&nbsp;&nbsp;¬∑&nbsp;&nbsp;' +
        '<a href="#signup" style="color:#1565c0;font-weight:600;text-decoration:none;">Get free alerts when rates drop ‚Üí</a></span>';
    } else {
      inner.innerHTML =
        '<strong style="font-size:1rem;color:#111;">Best available plan: ' + best.name + ' at ' + bestDisplayPx + '</strong><br>' +
        '<span style="color:#16a34a;font-weight:700;font-size:0.97rem;margin-top:6px;display:inline-block;">‚Üí You could save <strong>$' + saveMo.toFixed(0) + '/month</strong> ¬∑ <strong>$' + saveYr.toFixed(0) + '/year</strong> (' + savePct + '% less than your current rate)</span><br>' +
        '<span style="font-size:0.85rem;margin-top:10px;display:inline-block;">' +
        '<a href="#rates" style="color:#1565c0;font-weight:600;text-decoration:none;">See all plans ‚Üì</a>&nbsp;&nbsp;¬∑&nbsp;&nbsp;' +
        '<a href="#signup" style="color:#1565c0;font-weight:600;text-decoration:none;">Get free alerts when rates drop ‚Üí</a></span>';
    }
  }

  // Kick off initial calc
  runCalc();
})();
</script>

<!-- STATS -->
<div class="stats">
  <div class="stat"><div class="stat-num" id="stat-offers">‚Äî</div><div class="stat-label">Supplier Offers Tracked</div></div>
  <div class="stat"><div class="stat-num">4</div><div class="stat-label">Ohio Gas Territories</div></div>
  <div class="stat"><div class="stat-num" id="stat-savings">‚Äî</div><div class="stat-label">Max Fixed Rate Savings</div></div>
  <div class="stat"><div class="stat-num">Daily</div><div class="stat-label">Rate Updates</div></div>
</div>

<!-- RATES SECTION -->
<section>
  <h2>Current Ohio Natural Gas Rates</h2>
  <p class="subtitle">Live data from PUCO Energy Choice Ohio ‚Äî updated daily. These are certified rates from licensed suppliers.</p>

  <!-- RATE CLASS TOGGLE -->
<div id="rate-class-toggle" style="display:flex;align-items:center;gap:6px;margin-bottom:16px;font-size:0.88rem;">
  <button class="rc-pill active" data-rc="1" onclick="switchRateCode(1)">Residential</button>
  <button class="rc-pill" data-rc="2" onclick="switchRateCode(2)">Small Commercial</button>
  <span style="color:#9ca3af;font-size:0.78rem;margin-left:8px;">Large commercial/industrial rates are negotiated directly.</span>
</div>

<!-- TERRITORY TABS -->
<div id="territory-tabs" style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:20px;">
  <button class="tab-btn active" data-territory="8" onclick="switchTerritory(8)">
    Columbia Gas <span style="font-size:0.75em;opacity:0.8;">(most of Ohio)</span>
  </button>
  <button class="tab-btn" data-territory="1" onclick="switchTerritory(1)">
    Enbridge Gas <span style="font-size:0.75em;opacity:0.8;">(NE Ohio)</span>
  </button>
  <button class="tab-btn" data-territory="11" onclick="switchTerritory(11)">
    CenterPoint <span style="font-size:0.75em;opacity:0.8;">(Dayton)</span>
  </button>
  <button class="tab-btn" data-territory="10" onclick="switchTerritory(10)">
    Duke Energy <span style="font-size:0.75em;opacity:0.8;">(Cincinnati)</span>
  </button>
</div>
<div id="city-bills-banner" style="display:none;background:linear-gradient(135deg,#eff6ff,#e0f2fe);border:1px solid #93c5fd;border-radius:10px;padding:12px 18px;margin-bottom:16px;font-size:0.85rem;color:#1e3a8a;line-height:1.6;"></div>
<div id="territory-sco-bar" style="background:#fff3cd;border:1px solid #ffc107;border-radius:8px;padding:10px 14px;margin-bottom:16px;font-size:0.88rem;"></div>
<div id="rates-unit-toggle-row" style="display:flex;align-items:center;gap:8px;margin-bottom:10px;font-size:0.82rem;color:#6b7280;">
  View prices in: <span class="unit-toggle-pill"><button data-unit-toggle="ccf" onclick="setUnit('ccf')" class="utp-btn active">CCF</button><span class="utp-sep">|</span><button data-unit-toggle="mcf" onclick="setUnit('mcf')" class="utp-btn">MCF</button></span>
  <span style="font-size:0.75rem;color:#9ca3af;">(1 MCF = 10 CCF ‚Äî Enbridge bills in MCF)</span>
</div>
<div id="rates-loading" style="text-align:center;padding:40px;color:#6b7280;">Loading rates‚Ä¶</div>
<div id="rates-last-updated" style="font-size:0.8rem;color:#9ca3af;margin-bottom:6px;display:none;"></div>

<div id="rates-table-wrap" style="display:none;"></div>


  <p class="disclaimer">Rate data sourced from PUCO Energy Choice Ohio. Rates are updated daily but may not reflect real-time changes. Always verify current rates, terms, and fees directly with suppliers before enrolling. Savings estimates based on default SCO rate; actual savings depend on your usage and the rate after any intro period.</p>
</section>


<!-- RATE HISTORY CHART -->
<section style="background:#fff; margin:0; max-width:100%; padding:56px 24px; border-top:1px solid #e5e7eb;">
  <div style="max-width:1000px; margin:0 auto;">
    <h2 style="font-size:1.7rem;font-weight:800;margin-bottom:8px;color:#1a1a2e;">Why Rates Change: Ohio Gas Price History</h2>
    <p style="color:#666;margin-bottom:8px;font-size:1rem;">The SCO rate fluctuates with wholesale natural gas markets, weather events, and regulatory changes. That volatility is exactly why fixed-rate plans exist ‚Äî they lock your price regardless of what the market does.</p>
    <p class="updated" style="margin-bottom:20px;"><span class="live-dot"></span>Data: Jan 2020 ‚Äì Feb 2026 ¬∑ Mock data (historical backfill in progress)</p>
    <div style="position:relative;height:420px;max-height:50vh;">
      <canvas id="rate-history-chart"></canvas>
    </div>
    <p style="font-size:0.78rem;color:#9ca3af;margin-top:16px;line-height:1.6;">Source: PUCO, EIA. SCO = Standard Choice Offer (what you pay if you don't switch). Henry Hub = commodity benchmark price.</p>
    <div style="margin-top:12px;padding:12px 18px;background:#f0fdf4;border-radius:8px;border:1px solid #bbf7d0;font-size:0.85rem;color:#166534;">
      <strong>Green dashed line:</strong> Best available fixed rate today: <strong>$0.499/ccf</strong> ‚Äî locked for 12 months. Compare that to the red SCO line above.
    </div>
    <p style="margin-top:16px;font-size:0.9rem;text-align:center;"><a href="/learn" style="color:#1565c0;text-decoration:none;font-weight:600;">Want to understand how rates work? Read our full explainer &rarr;</a></p>
  </div>
</section>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.1.0/dist/chartjs-plugin-annotation.min.js"></script>
<script src="/chart-history.js"></script>

<!-- HOW YOUR BILL WORKS -->
<div class="bill-section">
  <div class="bill-inner">
    <h2>How your natural gas bill actually works</h2>
    <p class="subtitle">Most people look at the total and never think about the two parts inside. Understanding them is the first step to saving money.</p>

    <div class="bill-insight">
      <div class="bill-insight-icon">üí°</div>
      <div class="bill-insight-text">
        <h4>The key thing to know: your bill has two parts ‚Äî and only one of them can change.</h4>
        <p>Columbia Gas charges you for <strong>delivery</strong> (getting gas to your house ‚Äî this is fixed no matter what) and <strong>supply</strong> (the actual gas itself ‚Äî this is what you can shop around for). Switching to a competing supplier never affects your delivery service. Columbia Gas still maintains your pipes and responds to emergencies. You just pay a different company for the gas commodity.</p>
      </div>
    </div>

    <div class="bill-columns">

      <!-- DELIVERY COLUMN -->
      <div class="bill-col delivery">
        <div class="bill-col-header">
          <div>üè† Delivery ‚Äî Columbia Gas of Ohio</div>
          <span class="badge-lock">FIXED ‚Äî Can't change this</span>
        </div>
        <div class="bill-line">
          <div>
            <div class="bill-line-name">Fixed Monthly Delivery Charge</div>
            <div class="bill-line-sub">Covers maintaining your gas lines and meter. Same amount every month regardless of usage.</div>
          </div>
          <div class="bill-line-amount">$39.31</div>
        </div>
        <div class="bill-line">
          <div>
            <div class="bill-line-name">Usage Based Charges</div>
            <div class="bill-line-sub">Per-ccf distribution charge. Scales with how much gas you use.</div>
          </div>
          <div class="bill-line-amount">$12.86</div>
        </div>
        <div class="bill-line">
          <div>
            <div class="bill-line-name">Infrastructure Riders</div>
            <div class="bill-line-sub">State-mandated charges for replacing aging pipeline infrastructure across Ohio.</div>
          </div>
          <div class="bill-line-amount">$12.80</div>
        </div>
        <div class="bill-line">
          <div>
            <div class="bill-line-name">Gross Receipts Tax (4.987%)</div>
            <div class="bill-line-sub">Ohio state tax on utility revenue. Applied to delivery charges.</div>
          </div>
          <div class="bill-line-amount">$3.24</div>
        </div>
        <div class="bill-total">
          <span>Delivery Subtotal</span>
          <span>$68.21</span>
        </div>
      </div>

      <!-- SUPPLY COLUMN -->
      <div class="bill-col supply">
        <div class="bill-col-header">
          <div>‚ö° Supply ‚Äî Your Chosen Supplier</div>
          <span class="badge-change">YOU CAN SHOP THIS</span>
        </div>
        <div class="bill-line">
          <div>
            <div class="bill-line-name">Gas Supply Cost</div>
            <div class="bill-line-sub">Example: 118 ccf √ó $0.499/ccf (Utility Gas and Power rate)</div>
          </div>
          <div class="bill-line-amount">$58.88</div>
        </div>
        <div class="bill-line">
          <div>
            <div class="bill-line-name">Sales Tax on Supply</div>
            <div class="bill-line-sub">Applied to the gas commodity cost only.</div>
          </div>
          <div class="bill-line-amount">$4.71</div>
        </div>
        <div class="bill-total">
          <span>Supply Subtotal</span>
          <span>$63.59</span>
        </div>
        <div style="padding:12px 20px;font-size:0.78rem;background:#f0fdf4;border-top:1px solid #bbf7d0;">
          <strong style="color:#166534;">If still on default SCO rate ($1.071/ccf):</strong><br>
          118 ccf √ó $1.071 = $126.38 + tax ‚âà <strong style="color:#dc2626;">$133.88</strong><br>
          vs. $63.59 on this plan ‚Äî <strong style="color:#16a34a;">saving ~$70 this month alone</strong>
        </div>
      </div>

    </div>

    <!-- Riders explainer -->
    <h3 style="font-size:1.1rem;font-weight:800;margin-bottom:14px;color:#1e3a8a;">What are those "rider" charges?</h3>
    <p style="font-size:0.88rem;color:#555;margin-bottom:16px;line-height:1.6;">Every Ohio gas utility ‚Äî Columbia Gas, Duke Energy, Dominion/Enbridge, and Vectren ‚Äî charges infrastructure riders. The specific names and amounts vary by utility, but the idea is the same: state-regulated fees for pipeline maintenance and safety programs. <strong>You cannot opt out, and switching suppliers does not change them.</strong> The examples below are from a Columbia Gas bill; your utility's riders will look similar.</p>
    <div class="riders-grid">
      <div class="rider-card">
        <h5>Infrastructure Replacement Program Rider</h5>
        <p>Funds replacement of older cast iron and bare steel gas distribution pipes across Ohio.</p>
        <div class="rider-amount">Typical charge: ~$5.33/mo</div>
      </div>
      <div class="rider-card">
        <h5>PHMSA Infrastructure Rider</h5>
        <p>Federal pipeline safety compliance (Pipeline and Hazardous Materials Safety Administration requirements).</p>
        <div class="rider-amount">Typical charge: ~$0.46/mo</div>
      </div>
      <div class="rider-card">
        <h5>Capital Expenditure Program Rider</h5>
        <p>Covers major capital improvements to the gas distribution system approved by PUCO.</p>
        <div class="rider-amount">Typical charge: ~$6.14/mo</div>
      </div>
      <div class="rider-card">
        <h5>Infrastructure Development Rider</h5>
        <p>Funds new gas line extensions and system expansion projects.</p>
        <div class="rider-amount">Typical charge: ~$0.87/mo</div>
      </div>
    </div>

    <div style="margin-top:20px;padding:16px 20px;background:#f8f9fa;border-radius:10px;font-size:0.83rem;color:#555;line-height:1.6;border-left:3px solid #d1d5db;">
      <strong>Remember:</strong> Riders are billed by your local utility regardless of which supplier provides your gas. Every Ohio utility has them. Switching suppliers does not eliminate or reduce rider charges. The only line item that changes when you switch is the <strong>Supply</strong> section.
    </div>

  </div>
</div>

<!-- ELIGIBILITY SECTION -->
<section style="background:#f8f9fa; margin: 0; max-width:100%; padding: 48px 24px; border-top: 1px solid #e5e7eb;">
  <div style="max-width:1000px; margin:0 auto;">
    <h2 style="font-size:1.7rem;font-weight:800;margin-bottom:8px;color:#1a1a2e;">Can I switch suppliers?</h2>
    <p style="color:#666;margin-bottom:28px;font-size:1rem;">Ohio's Energy Choice program covers most residents ‚Äî but not everyone. Here's how to know if you're eligible.</p>

    <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:16px;">

      <div style="background:#dcfce7;border:2px solid #86efac;border-radius:14px;padding:22px 24px;">
        <div style="font-size:1.3rem;margin-bottom:10px;">‚úÖ</div>
        <h4 style="font-size:1rem;font-weight:800;color:#14532d;margin-bottom:10px;">You CAN switch if you have:</h4>
        <ul style="font-size:0.85rem;color:#166534;line-height:1.9;padding-left:18px;">
          <li>Columbia Gas of Ohio</li>
          <li>Duke Energy Ohio</li>
          <li>Dominion / Enbridge Gas Ohio</li>
          <li>Vectren / CenterPoint Energy (SW Ohio)</li>
          <li>AEP Ohio (electric)</li>
          <li>FirstEnergy (Ohio Edison, CEI, Toledo Edison)</li>
          <li>Duke Energy Ohio (electric)</li>
        </ul>
        <p style="font-size:0.78rem;color:#166534;margin-top:10px;">These utilities are regulated by PUCO and fully participate in the Energy Choice program.</p>
      </div>

      <div style="background:#fef2f2;border:2px solid #fca5a5;border-radius:14px;padding:22px 24px;">
        <div style="font-size:1.3rem;margin-bottom:10px;">‚ö†Ô∏è</div>
        <h4 style="font-size:1rem;font-weight:800;color:#7f1d1d;margin-bottom:10px;">You may NOT be eligible if:</h4>
        <ul style="font-size:0.85rem;color:#991b1b;line-height:1.9;padding-left:18px;">
          <li>You're served by a <strong>rural electric cooperative</strong> ‚Äî co-ops are not regulated by PUCO and largely don't participate in Energy Choice</li>
          <li>You're on the <strong>PIPP Plus</strong> or <strong>Graduate PIPP Plus</strong> program (low-income energy assistance) ‚Äî switching is restricted</li>
          <li>You're in a <strong>municipal utility</strong> district (some cities run their own utilities)</li>
        </ul>
        <p style="font-size:0.78rem;color:#991b1b;margin-top:10px;">Not sure? Check your bill ‚Äî your utility company's name will appear in the Delivery section.</p>
      </div>

      <div style="background:#eff6ff;border:2px solid #93c5fd;border-radius:14px;padding:22px 24px;">
        <div style="font-size:1.3rem;margin-bottom:10px;">üèòÔ∏è</div>
        <h4 style="font-size:1rem;font-weight:800;color:#1e3a8a;margin-bottom:10px;">Already in a group program?</h4>
        <p style="font-size:0.85rem;color:#1e40af;line-height:1.6;">Some cities and townships offer <strong>Governmental Aggregation</strong> ‚Äî they negotiate a group rate on behalf of all residents. If your municipality has enrolled you, you may already have a better rate, but you can still opt out and shop individually.</p>
        <p style="font-size:0.78rem;color:#1d4ed8;margin-top:10px;">Check with your local government or look for a notice on your bill that says "Governmental Aggregation."</p>
      </div>

    </div>
  </div>
</section>

<!-- FAQ / LEARN SECTION -->
<div class="faq-section">
  <div class="faq-inner">
    <h2>Learn how Ohio energy choice works</h2>
    <p class="subtitle">Plain-English answers to the questions everyone has before switching suppliers.</p>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        What is the SCO ‚Äî and why does it matter?
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p>The <strong>Standard Choice Offer (SCO)</strong> is the default gas supply rate your utility charges if you haven't chosen a competing supplier. It's set monthly by the utility based on wholesale market prices.</p>
        <p>Most Ohioans are on the SCO without knowing it. Because the SCO adjusts with the market, it can spike significantly ‚Äî Columbia Gas's SCO jumped 35% in a single month earlier this year, from $0.79/ccf to $1.07/ccf. Competing fixed-rate suppliers were offering $0.49‚Äì$0.58/ccf that same month.</p>
        <p>The SCO is not a bad deal by design ‚Äî it's just uncompetitive when the market has certified suppliers offering substantially lower rates.</p>
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        What is the PTC (Price to Compare)?
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p>The <strong>Price to Compare (PTC)</strong> is used for electric customers. It's the equivalent of the SCO for natural gas ‚Äî the baseline rate from your electric utility that you're trying to beat by choosing a competing electric supplier.</p>
        <p>For AEP Ohio and FirstEnergy customers, the PTC is published monthly and listed on the PUCO Energy Choice site. When shopping for electric suppliers, look for plans priced below your utility's current PTC.</p>
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        Fixed rate vs. variable rate ‚Äî which is right for me? <span class="faq-tag blue">Fixed</span><span class="faq-tag orange">Variable</span>
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p><strong>Fixed rate:</strong> Your price per ccf (or kWh) is locked for the contract term ‚Äî usually 6, 12, or 24 months. If market prices spike in winter, you're protected. The tradeoff: early termination fees ($50‚Äì$150 typical) if you cancel before the term ends.</p>
        <p><strong>Variable rate:</strong> Your price adjusts month to month with the market. No long commitment, and in off-peak spring/fall months variable rates can be very low. The risk: prices can climb fast in winter. Watch out for <strong>introductory "teaser" rates</strong> ‚Äî some suppliers advertise a very low price that only applies for the first month, then switches to a market-based variable rate.</p>
        <p><strong>Rule of thumb:</strong> If you're a high-usage household (cold Ohio winters) and want predictable bills, lock in a fixed rate in late summer before winter demand pushes prices up. If your usage is low and you're comfortable monitoring, a variable month-to-month plan offers flexibility.</p>
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        What is "true cost" ‚Äî and why do monthly fees matter?
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p>Some suppliers advertise a low per-ccf rate but charge a monthly fee on top. At face value they look cheap ‚Äî but once you factor in the fee, the true cost per ccf is higher than it looks.</p>
        <p><strong>True cost formula:</strong> <code>True cost = Rate + (Monthly fee √∑ your monthly ccf usage)</code></p>
        <p>Example: A plan at $0.45/ccf with a $9.95/month fee, for a customer using 60 ccf/month:<br>
        $0.45 + ($9.95 √∑ 60) = $0.45 + $0.166 = <strong>$0.616/ccf true cost</strong> ‚Äî more expensive than a plan at $0.55/ccf with no fee.</p>
        <p>Ohio Rate Watch shows both the advertised rate and monthly fee separately so you can calculate your own true cost based on your actual usage.</p>
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        What are all those "rider" charges on my bill? Can I get rid of them by switching?
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p>Riders are state-regulated fees charged by your utility for infrastructure maintenance programs. Every Ohio utility has them ‚Äî the names and amounts vary, but the idea is the same.</p>
        <p>Common Columbia Gas riders:</p>
        <ul>
          <li><strong>Infrastructure Replacement Program Rider</strong> (~$5.33/mo) ‚Äî replacing old cast iron and bare steel pipes</li>
          <li><strong>PHMSA Rider</strong> (~$0.46/mo) ‚Äî federal pipeline safety compliance</li>
          <li><strong>Capital Expenditure Program Rider</strong> (~$6.14/mo) ‚Äî major system improvements approved by PUCO</li>
          <li><strong>Infrastructure Development Rider</strong> (~$0.87/mo) ‚Äî new gas line extensions</li>
        </ul>
        <p><strong>Switching suppliers does not remove riders.</strong> They're billed by the utility regardless of who supplies your gas. The only part of your bill that changes when you switch is the supply section.</p>
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        What happens to my service if I switch suppliers?
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p>Nothing changes about your physical service. Columbia Gas (or Duke, or Dominion) still maintains the pipes, still responds to leaks and emergencies, and still delivers gas to your home. The <strong>only thing that changes is who you pay for the gas commodity itself</strong> ‚Äî and that shows up as a different company name in the Supply section of your bill.</p>
        <p>You don't need to do anything to your appliances, pipes, or meter. There's no interruption in service during the switch. The switch typically takes effect within one to two billing cycles.</p>
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        How do I actually switch suppliers?
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p>The process is straightforward:</p>
        <ul>
          <li><strong>Step 1:</strong> Find a supplier you want on the PUCO Energy Choice site (or right here on Ohio Rate Watch)</li>
          <li><strong>Step 2:</strong> Contact that supplier directly ‚Äî most have online enrollment, phone, or a link listed in their offer details</li>
          <li><strong>Step 3:</strong> Have your utility account number handy (it's on your bill)</li>
          <li><strong>Step 4:</strong> Review and sign the supplier agreement ‚Äî pay attention to the rate, term length, and any cancellation fees</li>
          <li><strong>Step 5:</strong> Your utility will confirm the switch; it takes effect within 1‚Äì2 billing cycles</li>
        </ul>
        <p>You can also switch back to the SCO (default rate) at any time ‚Äî just contact your current supplier to cancel, keeping any ETF in mind.</p>
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        What is Governmental Aggregation ‚Äî am I already in one?
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p>Ohio law allows cities and townships to negotiate a group energy rate on behalf of all residents. This is called <strong>Governmental Aggregation</strong>. If your municipality has done this, you may have been automatically enrolled in a group rate ‚Äî often better than the utility's default SCO.</p>
        <p>You'll know you're in one if your bill shows a supplier name and your municipality sent you a notice (often a yellow postcard). You can <strong>opt out at any time</strong> and shop individually for a better rate.</p>
        <p>Many Greater Cleveland, Columbus, and Cincinnati suburbs have active aggregation programs. Check with your city or township government, or look for "Governmental Aggregation" language on your bill.</p>
      </div>
    </div>

    <div class="faq-item">
      <div class="faq-q" onclick="this.parentElement.classList.toggle('open')">
        Is there a catch? What should I watch out for? <span class="faq-tag orange">Important</span>
        <span class="faq-icon">+</span>
      </div>
      <div class="faq-a">
        <p>Energy Choice is legitimate and regulated by PUCO ‚Äî but there are things to watch for:</p>
        <ul>
          <li><strong>Introductory "teaser" rates</strong> ‚Äî advertised low rates that only last 1 month before jumping to market rate</li>
          <li><strong>High early termination fees</strong> ‚Äî $75‚Äì$150 is common on fixed plans; make sure you know what you're signing</li>
          <li><strong>Door-to-door enrollment</strong> ‚Äî some suppliers still use aggressive door-to-door sales. You're never obligated to enroll on the spot. Always review offers at energychoice.ohio.gov first</li>
          <li><strong>Auto-renewal</strong> ‚Äî some contracts auto-renew at the end of the term, sometimes at a higher variable rate. Mark your calendar or sign up for Ohio Rate Watch alerts</li>
          <li><strong>Bundle requirements</strong> ‚Äî some deals require enrolling in both gas and electric; read the fine print</li>
        </ul>
        <p>When in doubt, contact PUCO at <strong>1-800-686-7826</strong> or the Ohio Consumers' Counsel at <strong>1-877-742-5622</strong>.</p>
      </div>
    </div>

  </div>
</div>

<!-- HOW IT WORKS -->
<section style="background:#f0f4f8; margin: 0; max-width:100%; padding: 56px 24px;">
  <div style="max-width:1000px; margin:0 auto;">
    <h2>How Ohio Rate Watch works</h2>
    <p class="subtitle">Simple, free, and takes 30 seconds to set up.</p>
    <div class="steps">
      <div class="step">
        <div class="step-num">1</div>
        <h4>Enter your email &amp; zip code</h4>
        <p>We figure out which Ohio utility serves your area and start watching rates for you automatically.</p>
      </div>
      <div class="step">
        <div class="step-num">2</div>
        <h4>We monitor every day</h4>
        <p>We check all PUCO-certified supplier rates daily. When something significant changes ‚Äî up or down ‚Äî we flag it.</p>
      </div>
      <div class="step">
        <div class="step-num">3</div>
        <h4>You get a plain-English email</h4>
        <p>No jargon. Just: "Here's what you're paying, here's what you could pay, here's how to switch if you want to."</p>
      </div>
      <div class="step">
        <div class="step-num">4</div>
        <h4>You decide ‚Äî always</h4>
        <p>We never switch your service for you. We just keep you informed so you can act when the timing is right.</p>
      </div>
    </div>
  </div>
</section>

<!-- MISSION -->
<section>
  <div class="mission">
    <h3>Why we built this</h3>
    <p>Ohio deregulated its natural gas market so residents could benefit from competition. But most people ‚Äî especially older homeowners ‚Äî have no idea the PUCO Energy Choice program even exists. They stay on the utility's default rate indefinitely, often paying twice what they need to. Ohio Rate Watch exists to change that. The information is public. We just make it useful.</p>
  </div>
</section>

<!-- FOOTER CTA -->
<div class="footer-cta" id="signup">
  <h2>Ready to stop overpaying?</h2>
  <p>Join free. Get notified the moment a better rate is available for your area.</p>
  <form class="signup-form" id="footer-form" style="max-width:520px; margin:0 auto;">
    <input type="email" id="footer-email" placeholder="Your email address" required>
    <input type="text" class="zip" id="footer-zip" placeholder="Zip" maxlength="5">
    <input type="number" step="0.001" min="0" max="5" id="footer-rate" placeholder="Rate $/ccf" style="max-width:120px;min-width:100px;flex:0 0 120px;" title="Your gas supply rate ($/ccf) ‚Äî find it on your bill">
    <button type="submit" id="footer-btn">Get Free Alerts ‚Üí</button>
  </form>
  <div id="footer-msg" style="margin-top:12px;font-weight:600;"></div>
</div>

<!-- 811 CALLOUT -->
<div class="callout-811">
  <img src="/811-logo.svg" alt="811 - Know what's below. Call before you dig." style="height:120px;width:auto;flex-shrink:0;">
  <div class="callout-811-text">
    <strong>Always call 811 before you dig.</strong><br>
    Planning a project in your yard? Call Ohio OUPS (Ohio Utility Protection Service) at 811 at least two business days before digging ‚Äî they'll mark the location of underground gas lines and other utilities for free. Know what's below.
  </div>
</div>

<footer>
  <strong>OhioRateWatch.com</strong> ¬∑ A project of EJ Systems LLC ¬∑ Cleveland, Ohio ¬∑ <a href="tel:8334317283">833.431.RATE</a><br>
  <br>
  <strong style="color:#e5e7eb;">Independent &amp; Non-Commercial</strong> ‚Äî We do not receive commissions from suppliers. Rates are sorted by price only. No featured listings. Ever.<br>
  <a href="/methodology" style="color:#60a5fa;">How our data works ‚Üí</a><br>
  <br>
  Rate data sourced from <a href="https://www.energychoice.ohio.gov" target="_blank">PUCO Energy Choice Ohio</a>. Not affiliated with any supplier, Columbia Gas, or any utility company.<br>
  Always verify current rates, terms, and fees directly with suppliers before switching service.<br>
  <br>
  Questions or concerns? Contact the <a href="https://www.puco.ohio.gov" target="_blank">Public Utilities Commission of Ohio (PUCO)</a> at 1-800-686-7826
  or the <a href="https://www.pickocc.org" target="_blank">Ohio Consumers' Counsel (OCC)</a> at 1-877-742-5622.<br>
  <br>
  <a href="https://github.com/ej-systems/ohio-rate-watch" target="_blank" style="color:#60a5fa;">Open source under AGPL-3.0</a> &nbsp;¬∑&nbsp;
  <button onclick="shareSite()" style="background:none;border:none;color:#60a5fa;cursor:pointer;font-size:0.82rem;padding:0;text-decoration:underline;">Share this site</button>
</footer>
<script>
function shareSite() {
  if (navigator.share) {
    navigator.share({ title: 'Ohio Rate Watch', text: 'Free tool to compare Ohio natural gas supplier rates ‚Äî no commissions, sorted by price only.', url: 'https://ohioratewatch.com' });
  } else {
    navigator.clipboard.writeText('https://ohioratewatch.com').then(() => alert('Link copied to clipboard!'));
  }
}
</script>

<script>
  const TERRITORY_DISPLAY = { columbia: 'Columbia Gas of Ohio', enbridge: 'Enbridge Gas Ohio', centerpoint: 'CenterPoint Energy Ohio', duke: 'Duke Energy Ohio' };

  async function subscribe(email, zip, currentRate, btn, msgEl, isHero) {
    btn.disabled = true;
    btn.textContent = 'Signing up...';
    msgEl.textContent = '';
    msgEl.className = '';
    try {
      const payload = { email, zip };
      if (currentRate) payload.current_rate = parseFloat(currentRate);
      const res = await fetch('/api/subscribe', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload),
      });
      const data = await res.json();
      if (res.ok) {
        const tName = data.territory ? TERRITORY_DISPLAY[data.territory] : null;
        msgEl.textContent = tName
          ? `‚úÖ We'll watch ${tName} rates for you. Check your email to confirm.`
          : "‚úÖ You're on the list! Check your email to confirm.";
        msgEl.className = isHero ? 'form-success' : '';
        if (!isHero) msgEl.style.color = '#a5d6a7';
        btn.closest('form').reset();
      } else {
        throw new Error(data.error || 'Something went wrong');
      }
    } catch (err) {
      msgEl.textContent = '‚úó ' + (err.message || 'Please try again.');
      msgEl.className = isHero ? 'form-error' : '';
      if (!isHero) msgEl.style.color = '#ef9a9a';
    } finally {
      btn.disabled = false;
      btn.textContent = 'Get Free Alerts ‚Üí';
    }
  }

  document.getElementById('hero-form').addEventListener('submit', (e) => {
    e.preventDefault();
    subscribe(document.getElementById('hero-email').value, document.getElementById('hero-zip').value, document.getElementById('hero-rate').value, document.getElementById('hero-btn'), document.getElementById('hero-msg'), true);
  });
  document.getElementById('footer-form').addEventListener('submit', (e) => {
    e.preventDefault();
    subscribe(document.getElementById('footer-email').value, document.getElementById('footer-zip').value, document.getElementById('footer-rate').value, document.getElementById('footer-btn'), document.getElementById('footer-msg'), false);
  });
</script>

<script>
const TERRITORY_INFO = {
  8:  { name: 'Columbia Gas of Ohio',    sco: 1.071, scoLabel: '$1.071/ccf (Feb 2026 SCO)' },
  1:  { name: 'Enbridge Gas Ohio',       sco: 0.796, scoLabel: '$0.796/ccf equiv. (Feb 2026 SCO, converted from MCF)' },
  11: { name: 'CenterPoint Energy Ohio', sco: 1.020, scoLabel: '$1.020/ccf (Feb 2026 SCO)' },
  10: { name: 'Duke Energy Ohio',        sco: null,  scoLabel: 'GCR rate (moving to SCO April 2026)' },
};

let currentTerritory = 8;
let currentRateCode = 1;
const ratesCache = {};

function switchRateCode(rc) {
  currentRateCode = rc;
  document.querySelectorAll('.rc-pill').forEach(b => {
    b.classList.toggle('active', parseInt(b.dataset.rc) === rc);
  });
  renderTerritory(currentTerritory);
}

function switchTerritory(tid) {
  currentTerritory = tid;
  document.querySelectorAll('.tab-btn').forEach(b => {
    b.classList.toggle('active', parseInt(b.dataset.territory) === tid);
  });
  renderTerritory(tid);
}

async function renderTerritory(tid) {
  const wrap = document.getElementById('rates-table-wrap');
  const loading = document.getElementById('rates-loading');
  const scoBar = document.getElementById('territory-sco-bar');
  const info = TERRITORY_INFO[tid];
  
  loading.style.display = 'block';
  wrap.style.display = 'none';
  currentRateFilter = 'all';

  const cacheKey = tid + '-' + currentRateCode;
  if (!ratesCache[cacheKey]) {
    try {
      const r = await fetch('/api/rates?territory=' + tid + '&category=NaturalGas&rateCode=' + currentRateCode);
      ratesCache[cacheKey] = await r.json();
    } catch(e) {
      loading.textContent = 'Failed to load rates. Please try again.';
      return;
    }
  }

  const data = ratesCache[cacheKey];
  const suppliers = (data.suppliers || [])
    .filter(s => s.price && s.price > 0)
    .sort((a, b) => {
      // Bundle-required plans sort to the bottom within each rate type
      const aBundle = /bundle|electric.*gas|gas.*electric/i.test((a.offerDetails || '') + ' ' + (a.promoDetails || ''));
      const bBundle = /bundle|electric.*gas|gas.*electric/i.test((b.offerDetails || '') + ' ' + (b.promoDetails || ''));
      if (aBundle !== bBundle) return aBundle ? 1 : -1;
      return a.price - b.price;
    });

  // SCO bar
  if (info.sco) {
    const bestFixed = suppliers.find(s => s.rateType === 'fixed' && !s.introPrice && !/bundle|electric.*gas|gas.*electric/i.test((s.offerDetails || '') + ' ' + (s.promoDetails || '')));
    const savings = bestFixed ? Math.round((1 - bestFixed.price / info.sco) * 100) : null;
    scoBar.innerHTML = '<strong>' + info.name + '</strong> default rate: <strong>' + info.scoLabel + '</strong>' +
      (savings ? ' \u2014 best fixed rate is <strong>' + savings + '% less</strong>' : '');
  } else {
    scoBar.innerHTML = '<strong>' + info.name + '</strong>: ' + info.scoLabel;
  }

  // Build rows ‚Äî old card-style layout
  function buildRow(s) {
    const unitNow = window.UNIT || 'ccf';
    const displayPrice = unitNow === 'mcf' ? '$' + (s.price * 10).toFixed(2) : '$' + s.price.toFixed(3);
    const price = '<span class="price-display" data-ccf="' + s.price.toFixed(4) + '">' + displayPrice + '</span><span class="unit-label">/' + unitNow + '</span>';
    const savings = info.sco ? Math.round((1 - s.price / info.sco) * 100) : null;
    const etf = s.earlyTerminationFee || 0;
    const mfee = s.monthlyFee || 0;
    const desc = s.offerDetails ? s.offerDetails.substring(0, 90) + (s.offerDetails.length > 90 ? '\u2026' : '') : '';
    let badges = '';
    if (s.introPrice) badges += '<span style="background:#fef3c7;color:#92400e;border:1px solid #f59e0b;padding:1px 7px;border-radius:4px;font-size:0.72rem;font-weight:700;margin-right:5px;">\u26a0 Intro rate</span>';
    if (s.renewablePct >= 100) badges += '<span style="background:#d1fae5;color:#065f46;border:1px solid #6ee7b7;padding:1px 7px;border-radius:4px;font-size:0.72rem;font-weight:700;margin-right:5px;">\ud83c\udf31 100% Renewable</span>';
    const _bundleText = (s.offerDetails || '') + ' ' + (s.promoDetails || '');
    if (/bundle|electric.*gas|gas.*electric/i.test(_bundleText)) badges += '<span style="background:#fce7f3;color:#9d174d;border:1px solid #f9a8d4;padding:1px 7px;border-radius:4px;font-size:0.72rem;font-weight:700;margin-right:5px;">\u26a0 Requires bundle</span>';
    if (etf > 0) badges += '<span style="background:#fee2e2;color:#991b1b;border:1px solid #fca5a5;padding:1px 7px;border-radius:4px;font-size:0.72rem;font-weight:700;margin-right:5px;">$' + etf.toFixed(2) + ' ETF</span>';
    if (mfee > 0) badges += '<span style="background:#fffbeb;color:#b45309;border:1px solid #fcd34d;padding:1px 7px;border-radius:4px;font-size:0.72rem;font-weight:700;margin-right:5px;">$' + mfee.toFixed(2) + '/mo fee</span>';
    if (s.termMonths > 0) badges += '<span style="background:#eff6ff;color:#1d4ed8;border:1px solid #bfdbfe;padding:1px 7px;border-radius:4px;font-size:0.72rem;font-weight:700;margin-right:5px;">' + s.termMonths + ' mo</span>';
    return '<tr data-ratetype="' + s.rateType + '">' +
      '<td style="padding:14px 16px;vertical-align:top;">' +
        '<strong style="font-size:0.95rem;color:#111;">' + s.name + '</strong>' +
        (s.phone ? '<br><span style="color:#6b7280;font-size:0.8rem;">' + s.phone + '</span>' : '') +
        (desc ? '<br><span style="color:#6b7280;font-size:0.78rem;line-height:1.4;">' + desc + '</span>' : '') +
        (badges ? '<br><span style="display:inline-flex;flex-wrap:wrap;gap:3px;margin-top:4px;">' + badges + '</span>' : '') +
      '</td>' +
      '<td style="padding:14px 16px;vertical-align:middle;white-space:nowrap;">' +
        '<span style="font-size:1.2rem;font-weight:800;color:#111;">' + price + '</span>' +
        (savings && savings > 0 ? '<span style="background:#d1fae5;color:#065f46;padding:2px 8px;border-radius:4px;font-size:0.78rem;font-weight:700;margin-left:6px;">Save ' + savings + '%</span>' : '') +
      '</td>' +
      '<td style="padding:14px 16px;font-weight:700;color:' + (etf > 0 ? '#dc2626' : '#16a34a') + ';vertical-align:middle;">$' + etf.toFixed(2) + '</td>' +
      '<td style="padding:14px 16px;font-weight:700;color:' + (mfee > 0 ? '#dc2626' : '#16a34a') + ';vertical-align:middle;">$' + mfee.toFixed(2) + '</td>' +
      (s.signUpUrl
        ? '<td style="padding:14px 16px;vertical-align:middle;"><a href="' + s.signUpUrl + '" target="_blank" rel="noopener" style="background:#1565c0;color:#fff;padding:8px 18px;border-radius:8px;font-size:0.88rem;font-weight:700;text-decoration:none;white-space:nowrap;display:inline-block;">View Offer \u2192</a></td>'
        : '<td></td>') +
      '</tr>';
  }

  function sectionDivider(label, color, bg, borderColor) {
    return '<tr class="section-label-row"><td colspan="5" style="padding:8px 16px 4px;font-size:0.72rem;font-weight:700;text-transform:uppercase;letter-spacing:0.6px;color:' + color + ';background:' + bg + ';border-top:2px solid ' + borderColor + ';">' + label + '</td></tr>';
  }

  const INITIAL_SHOW = 5; // plans per section shown initially
  const fixedPlans = suppliers.filter(s => s.rateType === 'fixed');
  const varPlans   = suppliers.filter(s => s.rateType !== 'fixed');
  let rows = '';
  if (fixedPlans.length) {
    rows += sectionDivider('\ud83d\udd12 Fixed Rate Plans (' + fixedPlans.length + ')', '#1d4ed8', '#f8fbff', '#bfdbfe');
    fixedPlans.slice(0, INITIAL_SHOW).forEach(s => { rows += buildRow(s); });
    if (fixedPlans.length > INITIAL_SHOW) {
      rows += '<tr id="fixed-hidden-rows" style="display:none;">' +
        '<td colspan="5" style="padding:0;">' +
        '<table style="width:100%;border-collapse:collapse;">' +
        fixedPlans.slice(INITIAL_SHOW).map(s => buildRow(s)).join('') +
        '</table></td></tr>';
      rows += '<tr id="fixed-load-more-row"><td colspan="5" style="padding:10px 16px;text-align:center;">' +
        '<button onclick="expandSection(\'fixed\')" style="border:1px solid #bfdbfe;border-radius:20px;padding:6px 20px;font-size:0.85rem;cursor:pointer;background:#eff6ff;color:#1d4ed8;font-weight:600;">' +
        'Show ' + (fixedPlans.length - INITIAL_SHOW) + ' more fixed plans \u25bc</button></td></tr>';
    }
  }
  if (varPlans.length) {
    rows += sectionDivider('\ud83d\udcc8 Variable Rate Plans (' + varPlans.length + ')', '#c2410c', '#fffbf7', '#fed7aa');
    varPlans.slice(0, INITIAL_SHOW).forEach(s => { rows += buildRow(s); });
    if (varPlans.length > INITIAL_SHOW) {
      rows += '<tr id="var-hidden-rows" style="display:none;">' +
        '<td colspan="5" style="padding:0;">' +
        '<table style="width:100%;border-collapse:collapse;">' +
        varPlans.slice(INITIAL_SHOW).map(s => buildRow(s)).join('') +
        '</table></td></tr>';
      rows += '<tr id="var-load-more-row"><td colspan="5" style="padding:10px 16px;text-align:center;">' +
        '<button onclick="expandSection(\'var\')" style="border:1px solid #fed7aa;border-radius:20px;padding:6px 20px;font-size:0.85rem;cursor:pointer;background:#fff7ed;color:#c2410c;font-weight:600;">' +
        'Show ' + (varPlans.length - INITIAL_SHOW) + ' more variable plans \u25bc</button></td></tr>';
    }
  }

  // Explanation cards text varies slightly for Duke (GCR vs SCO)
  var fixedCardText = 'Your price per ccf is locked for the contract term, even if the market rises. Best for predictability. Check the <strong style="color:#1d4ed8;">Early Term Fee</strong> before you sign \u2014 breaking a 12-month contract early can cost $75\u2013$150.';
  var varCardText   = 'Price adjusts month-to-month with the market. No long commitment. <strong style="color:#c2410c;">Watch out for intro rates</strong> \u2014 some companies advertise a low price that only lasts 1\u00a0month, then switches to market rate.';
  const scoUnitNow = window.UNIT || 'ccf';
  const scoDisplayPrice = info.sco ? (scoUnitNow === 'mcf' ? '$' + (info.sco * 10).toFixed(2) : '$' + info.sco.toFixed(3)) : '';
  var scoRowHtml = info.sco
    ? '<tr style="background:#fff8f8;"><td style="padding:12px 16px;color:#6b7280;font-style:italic;">' +
        '<span style="color:#1565c0;font-weight:600;">\u2139\ufe0f ' + info.name + ' Default Rate (SCO) \u2014 what you pay if you haven\u2019t switched</span>' +
      '</td>' +
      '<td style="padding:12px 16px;font-weight:800;color:#dc2626;font-size:1.1rem;"><span class="price-display" data-ccf="' + info.sco.toFixed(4) + '">' + scoDisplayPrice + '</span><span class="unit-label">/' + scoUnitNow + '</span></td>' +
      '<td style="padding:12px 16px;color:#6b7280;">\u2014</td>' +
      '<td style="padding:12px 16px;color:#6b7280;">\u2014</td>' +
      '<td></td></tr>'
    : '';

  wrap.innerHTML =
    // Explanation cards
    '<div style="display:flex;gap:14px;margin-bottom:20px;flex-wrap:wrap;">' +
      '<div class="rte-box fixed" style="flex:1;min-width:220px;">' +
        '<strong>\ud83d\udd12 Fixed Rate</strong>' +
        '<p>' + fixedCardText + '</p>' +
      '</div>' +
      '<div class="rte-box variable" style="flex:1;min-width:220px;">' +
        '<strong>\ud83d\udcc8 Variable Rate</strong>' +
        '<p>' + varCardText + '</p>' +
      '</div>' +
    '</div>' +
    // Filter pills
    '<div style="display:flex;align-items:center;gap:6px;margin-bottom:12px;flex-wrap:wrap;">' +
    '<span style="font-size:0.82rem;color:#6b7280;margin-right:4px;">Filter:</span>' +
    '<button class="rate-filter-btn active" data-filter="all" onclick="filterRates(\'all\')" style="border:1px solid #d1d5db;border-radius:20px;padding:4px 13px;font-size:0.8rem;cursor:pointer;background:#f3f4f6;font-weight:600;">All</button>' +
    '<button class="rate-filter-btn" data-filter="fixed" onclick="filterRates(\'fixed\')" style="border:1px solid #bfdbfe;border-radius:20px;padding:4px 13px;font-size:0.8rem;cursor:pointer;background:#eff6ff;color:#1d4ed8;font-weight:600;">\ud83d\udd12 Fixed</button>' +
    '<button class="rate-filter-btn" data-filter="variable" onclick="filterRates(\'variable\')" style="border:1px solid #fed7aa;border-radius:20px;padding:4px 13px;font-size:0.8rem;cursor:pointer;background:#fff7ed;color:#c2410c;font-weight:600;">\ud83d\udcc8 Variable</button>' +
    (data.isMCFConverted ? '<span style="font-size:0.78rem;color:#6b7280;margin-left:6px;">Prices shown per ccf (converted from mcf)</span>' : '') +
    '</div>' +
    // Table
    '<div style="overflow-x:auto;">' +
    '<table class="rate-table">' +
    '<thead><tr>' +
    '<th>Supplier</th><th class="rate-col-header">Rate ($/' + (window.UNIT||'ccf') + ')</th><th>Early Term Fee</th><th>Monthly Fee</th><th></th>' +
    '</tr></thead>' +
    '<tbody>' + rows + scoRowHtml + '</tbody>' +
    '</table></div>' +
    '<p style="margin-top:10px;font-size:0.82rem;color:#6b7280;">Verify all terms directly with the supplier before enrolling. ' +
    '<a href="https://www.energychoice.ohio.gov/ApplesToApplesComparision.aspx?Category=NaturalGas&TerritoryId=' + tid + '&RateCode=' + currentRateCode + '" target="_blank" rel="noopener" style="color:#1565c0;">View all plans on PUCO \u2192</a></p>';

  // Show "Last updated" timestamp + source attribution
  if (data.scrapedAt) {
    const ts = new Date(data.scrapedAt);
    const fmt = ts.toLocaleString('en-US', {
      timeZone: 'America/New_York',
      month: 'short', day: 'numeric', year: 'numeric',
      hour: 'numeric', minute: '2-digit', hour12: true,
    });
    const tsEl = document.getElementById('rates-last-updated');
    if (tsEl) tsEl.innerHTML = 'Last updated: ' + fmt + ' ET &nbsp;¬∑&nbsp; <a href="https://energychoice.ohio.gov" target="_blank" rel="noopener" style="color:#6b7280;">Source: energychoice.ohio.gov</a>';
  }

  loading.style.display = 'none';
  wrap.style.display = 'block';
  const tsEl2 = document.getElementById('rates-last-updated');
  if (tsEl2) tsEl2.style.display = 'block';

  // Fetch and render city bills banner
  const TERRITORY_TO_KEY = { 8: 'columbia', 1: 'enbridge', 11: 'centerpoint', 10: 'duke' };
  const billsBanner = document.getElementById('city-bills-banner');
  const utilKey = TERRITORY_TO_KEY[tid];
  if (utilKey) {
    const billsCacheKey = 'bills-' + utilKey;
    if (!ratesCache[billsCacheKey]) {
      try {
        const br = await fetch('/api/city-bills?territory=' + utilKey);
        ratesCache[billsCacheKey] = await br.json();
      } catch(e) { ratesCache[billsCacheKey] = null; }
    }
    const billsData = ratesCache[billsCacheKey];
    if (billsData && billsData.cities && billsData.cities.length > 0) {
      const monthLabel = billsData.reportMonth ? (() => {
        const [y, m] = billsData.reportMonth.split('-');
        return new Date(+y, +m - 1, 1).toLocaleDateString('en-US', { month: 'short', year: 'numeric' });
      })() : '';
      const topCities = billsData.cities.slice(0, 5);
      const cityParts = topCities.map(c => {
        const pct = c.gasPctChange != null ? c.gasPctChange : 0;
        const arrow = pct >= 0 ? '‚Üë' : '‚Üì';
        const highlight = Math.abs(pct) > 20;
        return '<span style="' + (highlight ? 'color:#b45309;font-weight:700;' : '') + '">' +
          c.city + ': $' + (c.gasBillTotal != null ? c.gasBillTotal.toFixed(2) : '‚Äî') +
          ' <span style="font-size:0.78rem;">' + arrow + Math.abs(pct).toFixed(1) + '%</span></span>';
      });
      billsBanner.innerHTML = 'üìä <strong>' + monthLabel + ' avg gas bills</strong> ‚Äî ' +
        cityParts.join(' &nbsp;¬∑&nbsp; ') +
        '<br><span style="font-size:0.75rem;color:#6b7280;">Source: PUCO Utility Rate Survey (residential, 10 Mcf/mo)</span>';
      billsBanner.style.display = 'block';
    } else {
      billsBanner.style.display = 'none';
    }
  } else {
    billsBanner.style.display = 'none';
  }
}

window.expandSection = function(section) {
  const hiddenRows = document.getElementById(section + '-hidden-rows');
  const moreRow = document.getElementById(section + '-load-more-row');
  if (hiddenRows) hiddenRows.style.display = '';
  if (moreRow) moreRow.style.display = 'none';
};

// Load default territory on page load

  // Rate type filter
  let currentRateFilter = 'all';
  window.filterRates = function(type) {
    currentRateFilter = type;
    document.querySelectorAll('.rate-filter-btn').forEach(b => {
      b.classList.toggle('active', b.dataset.filter === type);
    });
    document.querySelectorAll('#rates-table-wrap table tbody tr').forEach(row => {
      const rt = row.dataset.ratetype;
      row.style.display = (type === 'all' || rt === type) ? '' : 'none';
    });
    // Update count label
    const visible = [...document.querySelectorAll('#rates-table-wrap table tbody tr')]
      .filter(r => r.style.display !== 'none').length;
    const countEl = document.getElementById('rates-visible-count');
    if (countEl) countEl.textContent = visible;
  };

document.addEventListener('DOMContentLoaded', function() {
  renderTerritory(8);

  // Populate live stats
  fetch('/api/stats')
    .then(r => r.json())
    .then(d => {
      const totalEl = document.getElementById('stat-offers');
      if (totalEl && d.totalOffers) totalEl.textContent = d.totalOffers.toLocaleString();
    }).catch(() => {});

  // Best savings stat ‚Äî fetch Columbia Gas (largest territory) and find best non-bundle fixed rate
  fetch('/api/rates?territory=8&category=NaturalGas&rateCode=1')
    .then(r => r.json())
    .then(d => {
      const savingsEl = document.getElementById('stat-savings');
      const sco = 1.071; // Columbia Gas SCO
      const best = (d.suppliers || []).find(s =>
        s.rateType === 'fixed' && s.price > 0 &&
        !/bundle|electric.*gas|gas.*electric/i.test((s.offerDetails || '') + ' ' + (s.promoDetails || ''))
      );
      if (savingsEl && best && best.price) {
        const pct = Math.round((1 - best.price / sco) * 100);
        savingsEl.textContent = pct + '%';
      }
    }).catch(() => {});
});
</script>

<script>
// ‚îÄ‚îÄ CCF/MCF Unit Toggle System ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
(function initUnitToggle() {
  window.UNIT = localStorage.getItem('gasUnit') || 'ccf';

  window.setUnit = function(unit) {
    window.UNIT = unit;
    localStorage.setItem('gasUnit', unit);

    // Update all toggle buttons on page
    document.querySelectorAll('[data-unit-toggle]').forEach(function(btn) {
      btn.classList.toggle('active', btn.dataset.unitToggle === unit);
    });

    // Update all price-display spans
    applyUnitToDisplays();

    // Update column headers
    document.querySelectorAll('.rate-col-header').forEach(function(el) {
      el.textContent = 'Rate ($/' + unit + ')';
    });

    // Update compact calc rate label
    var calcLabel = document.getElementById('calc-rate-unit-label');
    if (calcLabel) calcLabel.textContent = '$/' + unit;

    // Update compact calc slider range
    var rateNum = document.getElementById('calc-rate-num');
    var rateSlider = document.getElementById('calc-rate-slider');
    if (rateNum && rateSlider) {
      if (unit === 'mcf') {
        var currentCCF = parseFloat(rateNum.value);
        var isCCFRange = parseFloat(rateSlider.max) < 5;
        var newVal = isCCFRange ? (currentCCF * 10).toFixed(2) : rateNum.value;
        rateNum.min = '4.00'; rateNum.max = '15.00'; rateNum.step = '0.10'; rateNum.value = newVal;
        rateSlider.min = '4.00'; rateSlider.max = '15.00'; rateSlider.step = '0.10'; rateSlider.value = newVal;
      } else {
        var currentMCF = parseFloat(rateNum.value);
        var isMCFRange = parseFloat(rateSlider.max) > 5;
        var newValCCF = isMCFRange ? (currentMCF / 10).toFixed(3) : rateNum.value;
        rateNum.min = '0.40'; rateNum.max = '1.50'; rateNum.step = '0.01'; rateNum.value = newValCCF;
        rateSlider.min = '0.40'; rateSlider.max = '1.50'; rateSlider.step = '0.01'; rateSlider.value = newValCCF;
      }
    }

    // Re-run the compact calculator with new unit
    if (typeof scheduleCalc === 'function') scheduleCalc();
  };

  window.applyUnitToDisplays = function() {
    var unit = window.UNIT;
    document.querySelectorAll('.price-display[data-ccf]').forEach(function(el) {
      var ccf = parseFloat(el.dataset.ccf);
      el.textContent = unit === 'mcf' ? '$' + (ccf * 10).toFixed(2) : '$' + ccf.toFixed(3);
    });
    document.querySelectorAll('.unit-label').forEach(function(el) {
      el.textContent = '/' + unit;
    });
  };

  // Apply saved unit on load (after a short delay so DOM is ready)
  document.addEventListener('DOMContentLoaded', function() {
    if (window.UNIT !== 'ccf') {
      // Update toggle button states immediately
      document.querySelectorAll('[data-unit-toggle]').forEach(function(btn) {
        btn.classList.toggle('active', btn.dataset.unitToggle === window.UNIT);
      });
      // Slider/label updates
      setUnit(window.UNIT);
    }
  });
})();
</script>
</body>
</html>
