<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<link rel="icon" type="image/svg+xml" href="/favicon.svg">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Understanding Ohio Natural Gas Deregulation ‚Äî Ohio Rate Watch</title>
<meta name="description" content="Learn how Ohio's deregulated natural gas market works, how SCO rates are set, and how to shop for a better rate. Plain-English guide with historical rate data.">
<style>
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: #f8f9fa; color: #1a1a2e; }

  /* NAV */
  nav { background: #fff; border-bottom: 2px solid #e8f4f8; padding: 0 24px; display: flex; align-items: center; justify-content: space-between; height: 64px; position: sticky; top: 0; z-index: 100; box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
  .logo { font-size: 1.3rem; font-weight: 800; color: #1565c0; letter-spacing: -0.5px; text-decoration: none; }
  .logo span { color: #e53935; }
  .nav-links { display: flex; gap: 20px; align-items: center; }
  .nav-links a { color: #555; text-decoration: none; font-size: 0.9rem; font-weight: 500; }
  .nav-links a:hover { color: #1565c0; }
  .nav-links a.active { color: #1565c0; font-weight: 700; }

  /* HERO */
  .hero { background: linear-gradient(135deg, #1565c0 0%, #0d47a1 100%); color: #fff; padding: 56px 24px 64px; text-align: center; }
  .breadcrumb { font-size: 0.82rem; opacity: 0.7; margin-bottom: 20px; }
  .breadcrumb a { color: #fff; text-decoration: underline; opacity: 0.85; }
  .breadcrumb a:hover { opacity: 1; }
  .hero h1 { font-size: clamp(1.8rem, 4.5vw, 2.8rem); font-weight: 900; line-height: 1.15; max-width: 780px; margin: 0 auto 16px; }
  .hero p { font-size: 1.1rem; opacity: 0.9; max-width: 620px; margin: 0 auto; line-height: 1.6; }

  /* TABLE OF CONTENTS */
  .toc { background: #fff; border-bottom: 1px solid #e0e0e0; padding: 20px 24px; }
  .toc-inner { max-width: 800px; margin: 0 auto; }
  .toc-inner h3 { font-size: 0.85rem; text-transform: uppercase; letter-spacing: 0.5px; color: #999; margin-bottom: 12px; }
  .toc-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 6px 24px; }
  .toc-grid a { color: #1565c0; text-decoration: none; font-size: 0.88rem; padding: 4px 0; display: block; }
  .toc-grid a:hover { text-decoration: underline; }

  /* CONTENT SECTIONS */
  .content-section { max-width: 800px; margin: 0 auto; padding: 48px 24px; }
  .content-section h2 { font-size: 1.5rem; font-weight: 800; margin-bottom: 6px; color: #1a1a2e; padding-top: 16px; }
  .content-section .section-num { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; color: #1565c0; font-weight: 700; margin-bottom: 6px; }
  .content-section p { font-size: 0.95rem; color: #374151; line-height: 1.7; margin-bottom: 16px; }
  .content-section ul, .content-section ol { margin: 0 0 16px 20px; font-size: 0.95rem; color: #374151; line-height: 1.8; }
  .content-section li { margin-bottom: 6px; }
  .bill-learn-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 12px; }
  @media (max-width: 640px) { .bill-learn-grid { grid-template-columns: 1fr; } }

  /* INFO BOXES */
  .info-box { border-radius: 10px; padding: 18px 22px; margin: 20px 0; font-size: 0.9rem; line-height: 1.6; }
  .info-box.blue { background: #eff6ff; border: 1px solid #bfdbfe; color: #1e3a8a; }
  .info-box.yellow { background: #fefce8; border: 1px solid #fde68a; color: #78350f; }
  .info-box.green { background: #f0fdf4; border: 1px solid #bbf7d0; color: #14532d; }
  .info-box.red { background: #fef2f2; border: 1px solid #fca5a5; color: #7f1d1d; }
  .info-box strong { display: block; margin-bottom: 6px; }

  /* FORMULA BOX */
  .formula-box { background: #1a1a2e; color: #e2e8f0; border-radius: 10px; padding: 20px 24px; margin: 20px 0; font-family: 'Courier New', monospace; font-size: 1rem; text-align: center; letter-spacing: 0.5px; }
  .formula-box .result { color: #fbbf24; font-weight: 700; }

  /* DIVIDER */
  .section-divider { border: none; border-top: 1px solid #e5e7eb; margin: 0; }

  /* CHART SECTION */
  .chart-section { background: #fff; padding: 48px 24px; border-top: 1px solid #e5e7eb; border-bottom: 1px solid #e5e7eb; }
  .chart-inner { max-width: 1000px; margin: 0 auto; }
  .chart-inner h2 { font-size: 1.5rem; font-weight: 800; margin-bottom: 8px; color: #1a1a2e; }
  .chart-inner > p { font-size: 0.95rem; color: #374151; line-height: 1.7; margin-bottom: 16px; }
  .time-btns { display: flex; gap: 6px; flex-wrap: wrap; margin-bottom: 16px; }
  .time-btn { padding: 7px 16px; border-radius: 6px; border: 1.5px solid #d1d5db; background: #fff; color: #374151; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.15s; }
  .time-btn.active { background: #e53935; color: #fff; border-color: #e53935; }
  .time-btn:hover:not(.active) { border-color: #9ca3af; }
  .chart-source { font-size: 0.78rem; color: #9ca3af; margin-top: 16px; line-height: 1.6; }

  /* QUESTIONS CHECKLIST */
  .checklist { list-style: none; margin: 16px 0; padding: 0; }
  .checklist li { padding: 10px 14px; margin-bottom: 6px; background: #f9fafb; border-radius: 8px; border-left: 3px solid #1565c0; font-size: 0.9rem; color: #374151; }

  /* STEPS */
  .steps-list { counter-reset: step; list-style: none; margin: 16px 0; padding: 0; }
  .steps-list li { counter-increment: step; padding: 12px 14px 12px 52px; margin-bottom: 8px; background: #f9fafb; border-radius: 8px; font-size: 0.9rem; color: #374151; position: relative; line-height: 1.5; }
  .steps-list li::before { content: counter(step); position: absolute; left: 14px; top: 10px; width: 28px; height: 28px; background: #1565c0; color: #fff; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 800; font-size: 0.85rem; }

  /* GLOSSARY */
  .glossary { margin: 16px 0; }
  .glossary-item { padding: 14px 18px; border-bottom: 1px solid #f0f0f0; }
  .glossary-item:last-child { border-bottom: none; }
  .glossary-term { font-weight: 800; color: #1565c0; font-size: 0.95rem; margin-bottom: 4px; }
  .glossary-def { font-size: 0.88rem; color: #4b5563; line-height: 1.6; }

  /* RESOURCES LINKS */
  .resource-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 12px; margin: 16px 0; }
  .resource-card { background: #fff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 16px 18px; }
  .resource-card h4 { font-size: 0.9rem; font-weight: 700; color: #1a1a2e; margin-bottom: 6px; }
  .resource-card p { font-size: 0.82rem; color: #6b7280; line-height: 1.5; margin-bottom: 8px; }
  .resource-card a { font-size: 0.82rem; color: #1565c0; text-decoration: none; font-weight: 600; }
  .resource-card a:hover { text-decoration: underline; }

  /* FOOTER CTA */
  .footer-cta { background: #1565c0; color: #fff; padding: 56px 24px; text-align: center; }
  .footer-cta h2 { font-size: 1.8rem; margin-bottom: 12px; color: #fff; }
  .footer-cta p { opacity: 0.85; margin-bottom: 28px; max-width: 480px; margin-left: auto; margin-right: auto; }
  .signup-form { display: flex; gap: 10px; max-width: 480px; margin: 0 auto; flex-wrap: wrap; justify-content: center; }
  .signup-form input { flex: 1; min-width: 180px; padding: 14px 18px; border: none; border-radius: 8px; font-size: 1rem; outline: none; box-shadow: 0 2px 12px rgba(0,0,0,0.15); }
  .signup-form input.zip { max-width: 110px; min-width: 90px; flex: 0 0 110px; }
  .signup-form button { background: #ffcc02; color: #1a1a2e; border: none; padding: 14px 24px; border-radius: 8px; font-size: 1rem; font-weight: 700; cursor: pointer; white-space: nowrap; transition: background 0.2s; }
  .signup-form button:hover { background: #f9a825; }
  .signup-form button:disabled { opacity: 0.6; cursor: not-allowed; }
  .form-success { color: #a5d6a7; font-weight: 600; margin-top: 12px; font-size: 0.95rem; }
  .form-error { color: #ef9a9a; font-weight: 600; margin-top: 12px; font-size: 0.95rem; }

  /* FOOTER */
  footer { background: #111827; color: #9ca3af; padding: 28px 24px; text-align: center; font-size: 0.82rem; line-height: 1.8; }
  footer strong { color: #fff; }
  footer a { color: #60a5fa; text-decoration: none; }

  @media (max-width: 600px) {
    .nav-links { gap: 12px; }
    .nav-links a { font-size: 0.82rem; }
    .content-section { padding: 36px 18px; }
    .chart-inner { padding: 0; }
  }
</style>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
</head>
<body>

<nav>
  <a href="/" class="logo">Ohio<span>Rate</span>Watch <span style="font-size:0.55rem;background:#f59e0b;color:#fff;padding:2px 7px;border-radius:20px;font-weight:700;letter-spacing:0.5px;vertical-align:middle;">BETA</span></a>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/learn" class="active">Learn</a>
    <a href="#">Alerts</a>
  </div>
</nav>

<!-- HERO -->
<div class="hero">
  <div class="breadcrumb"><a href="/">Home</a> ‚Üí Learn</div>
  <h1>Understanding Your Ohio Natural Gas Bill</h1>
  <p>Ohio deregulated natural gas in 1996. Here's what that actually means for your wallet.</p>
</div>

<!-- TABLE OF CONTENTS -->
<div class="toc">
  <div class="toc-inner">
    <h3>On this page</h3>
    <div class="toc-grid">
      <a href="#deregulation">Ohio Deregulation 101</a>
      <a href="#sco-rate">How the SCO Rate Is Set</a>
      <a href="#history-chart">Historical Rate Chart</a>
      <a href="#price-spikes">What Happened in 2022</a>
      <a href="#aggregation">Government Aggregation</a>
      <a href="#rights">Your Rights as a Shopper</a>
      <a href="#how-to-switch">Steps to Switch</a>
      <a href="#glossary">Glossary</a>
      <a href="#resources">PUCO &amp; Official Resources</a>
    </div>
  </div>
</div>

<!-- SECTION 1: DEREGULATION 101 -->
<div class="content-section" id="deregulation">
  <div class="section-num">Section 1</div>
  <h2>Ohio Deregulation 101</h2>
  <p>In 1996, Ohio opened its natural gas market to competition, allowing residents to choose their gas supplier. (Electric deregulation followed in 2001.) This means you have the legal right to shop for a better price on the gas commodity itself.</p>
  <p>Here's the key distinction: <strong>you choose your gas supplier, but your utility still delivers it.</strong> Columbia Gas, Enbridge, or CenterPoint maintains the pipes, reads your meter, and responds to emergencies regardless of who supplies your gas.</p>
  <p>If you don't choose a supplier, you're automatically placed on the <strong>Standard Choice Offer (SCO)</strong> ‚Äî the default rate set monthly by the utility based on market prices. About 3 million Ohio customers are on the SCO right now.</p>

  <div class="info-box blue">
    <strong>Three utilities currently use the SCO system:</strong>
    Columbia Gas of Ohio ¬∑ Enbridge Gas Ohio ¬∑ CenterPoint Energy Ohio<br><br>
    Duke Energy Ohio currently uses a different method called Gas Cost Recovery (GCR), but is moving to the SCO system in April 2026.
  </div>

  <div id="ohio-utility-map-wrap" style="margin:24px 0;">
    <p style="font-size:0.85rem;color:#6b7280;margin-bottom:8px;">Hover over your county to see your utility.</p>
    <div id="ohio-map" style="height:380px;border-radius:12px;overflow:hidden;border:1px solid #e5e7eb;background:#f9fafb;"></div>
    <div style="margin-top:10px;display:flex;flex-wrap:wrap;gap:12px;font-size:0.8rem;">
      <span style="display:flex;align-items:center;gap:5px;"><span style="width:14px;height:14px;border-radius:3px;background:#1565c0;display:inline-block;"></span>Columbia Gas of Ohio</span>
      <span style="display:flex;align-items:center;gap:5px;"><span style="width:14px;height:14px;border-radius:3px;background:#7b1fa2;display:inline-block;"></span>Enbridge Gas Ohio</span>
      <span style="display:flex;align-items:center;gap:5px;"><span style="width:14px;height:14px;border-radius:3px;background:#f57c00;display:inline-block;"></span>CenterPoint Energy Ohio</span>
      <span style="display:flex;align-items:center;gap:5px;"><span style="width:14px;height:14px;border-radius:3px;background:#16a34a;display:inline-block;"></span>Duke Energy Ohio</span>
    </div>

  <div id="zip-lookup" style="margin-top:16px;padding:14px 16px;background:#f9fafb;border:1px solid #e5e7eb;border-radius:10px;">
    <p style="font-size:0.85rem;font-weight:600;color:#374151;margin:0 0 8px 0;">Find your utility by ZIP code</p>
    <div style="display:flex;gap:8px;flex-wrap:wrap;">
      <input id="zip-input" type="text" maxlength="5" placeholder="Enter ZIP code" inputmode="numeric"
        style="border:1px solid #d1d5db;border-radius:6px;padding:6px 10px;font-size:0.9rem;width:130px;outline:none;" />
      <button id="zip-btn" onclick="lookupZip()"
        style="background:#1565c0;color:#fff;border:none;border-radius:6px;padding:6px 14px;font-size:0.9rem;cursor:pointer;font-weight:600;">
        Look up
      </button>
    </div>
    <div id="zip-result" style="margin-top:10px;font-size:0.85rem;display:none;"></div>
  </div>
  </div>

</div>

<hr class="section-divider">

<!-- SECTION 2: HOW SCO IS SET -->
<div class="content-section" id="sco-rate">
  <div class="section-num">Section 2</div>
  <h2>How the SCO Rate Is Set</h2>
  <p>The SCO rate you pay each month is calculated from two components:</p>
  <ol>
    <li><strong>NYMEX month-end settlement price</strong> ‚Äî the commodity cost of natural gas, determined by national markets. This changes monthly based on supply, demand, and weather.</li>
    <li><strong>Retail Price Adjustment (RPA)</strong> ‚Äî the supplier's cost to actually deliver gas to your utility's system. This is set through a competitive auction process, with results announced by PUCO.</li>
  </ol>

  <div class="formula-box">
    SCO = (NYMEX settlement + RPA) √∑ 10 = <span class="result">$/ccf</span>
  </div>

  <p>Because both components can change, your SCO rate fluctuates monthly. You have no price certainty ‚Äî it could go up or down from one bill to the next.</p>

  <div class="info-box red">
    <strong>The 2025‚Äì2026 RPA spike</strong>
    The RPA jumped from $1.66/Mcf to $3.25/Mcf ‚Äî a 96% increase. This is the primary reason bills have roughly doubled for SCO customers. The RPA is set by auction, and the latest auction produced dramatically higher bids. This isn't a one-time blip ‚Äî it reflects structural changes in supplier costs.
  </div>
</div>

<hr class="section-divider">

<!-- SECTION 3: HISTORICAL CHART -->

<hr class="section-divider">

<div class="content-section" id="understanding-your-bill">
  <div class="section-num">Section 3</div>
  <h2>Understanding Your Bill ‚Äî Line by Line</h2>
  <p>Your natural gas bill has <strong>two completely separate parts</strong>: delivery and supply. Most people see one big total and never look further. Once you understand the difference, shopping for a better rate becomes obvious ‚Äî and the savings become very real.</p>

  <div style="background:linear-gradient(135deg,#fefce8,#fef3c7);border:2px solid #fbbf24;border-radius:12px;padding:20px 24px;display:flex;gap:16px;align-items:flex-start;margin-bottom:28px;">
    <div style="font-size:1.6rem;flex-shrink:0;margin-top:2px;">üí°</div>
    <div>
      <h4 style="font-size:1rem;font-weight:800;color:#78350f;margin-bottom:6px;">Only one part of your bill can change when you switch suppliers.</h4>
      <p style="font-size:0.88rem;color:#78350f;line-height:1.55;margin:0;">Columbia Gas charges for <strong>delivery</strong> (pipes, meter, infrastructure) and <strong>supply</strong> (the gas itself). Switching to a competing supplier only changes the supply line. Columbia Gas still delivers your gas, responds to emergencies, and maintains your service ‚Äî nothing about that changes.</p>
    </div>
  </div>

  <div class="bill-learn-grid">
    <div style="border-radius:14px;overflow:hidden;border:2px solid #bfdbfe;">
      <div style="padding:14px 20px;background:#eff6ff;color:#1e3a8a;font-size:0.85rem;font-weight:700;display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;">
        <span>üè† Delivery ‚Äî Columbia Gas</span>
        <span style="background:#1e40af;color:#fff;font-size:0.7rem;padding:2px 9px;border-radius:10px;white-space:nowrap;">FIXED ‚Äî Can't change</span>
      </div>
      <div style="display:flex;justify-content:space-between;padding:10px 20px;border-bottom:1px solid #f3f4f6;font-size:0.85rem;gap:12px;">
        <div><div style="color:#374151;">Fixed Monthly Delivery Charge</div><div style="font-size:0.72rem;color:#9ca3af;margin-top:2px;">Meter, pipes, emergency service. Same every month.</div></div>
        <div style="font-weight:700;white-space:nowrap;">$39.31</div>
      </div>
      <div style="display:flex;justify-content:space-between;padding:10px 20px;border-bottom:1px solid #f3f4f6;font-size:0.85rem;gap:12px;">
        <div><div style="color:#374151;">Usage Based Charges</div><div style="font-size:0.72rem;color:#9ca3af;margin-top:2px;">Per-ccf distribution. Scales with usage.</div></div>
        <div style="font-weight:700;white-space:nowrap;">$12.86</div>
      </div>
      <div style="display:flex;justify-content:space-between;padding:10px 20px;border-bottom:1px solid #f3f4f6;font-size:0.85rem;gap:12px;">
        <div><div style="color:#374151;">Infrastructure Riders</div><div style="font-size:0.72rem;color:#9ca3af;margin-top:2px;">Pipeline replacement &amp; safety programs. Can't opt out.</div></div>
        <div style="font-weight:700;white-space:nowrap;">$12.80</div>
      </div>
      <div style="display:flex;justify-content:space-between;padding:10px 20px;border-bottom:1px solid #f3f4f6;font-size:0.85rem;gap:12px;">
        <div><div style="color:#374151;">Gross Receipts Tax (4.987%)</div><div style="font-size:0.72rem;color:#9ca3af;margin-top:2px;">Ohio state tax on utility revenue.</div></div>
        <div style="font-weight:700;white-space:nowrap;">$3.24</div>
      </div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;font-weight:800;font-size:0.95rem;background:#eff6ff;color:#1e3a8a;border-top:2px solid #bfdbfe;">
        <span>Delivery Subtotal</span><span>$68.21</span>
      </div>
    </div>

    <div style="border-radius:14px;overflow:hidden;border:2px solid #bbf7d0;">
      <div style="padding:14px 20px;background:#f0fdf4;color:#14532d;font-size:0.85rem;font-weight:700;display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap;">
        <span>‚ö° Supply ‚Äî Your Supplier</span>
        <span style="background:#16a34a;color:#fff;font-size:0.7rem;padding:2px 9px;border-radius:10px;white-space:nowrap;">YOU CAN SHOP THIS</span>
      </div>
      <div style="display:flex;justify-content:space-between;padding:10px 20px;border-bottom:1px solid #f3f4f6;font-size:0.85rem;gap:12px;">
        <div><div style="color:#374151;">Gas Supply Cost</div><div style="font-size:0.72rem;color:#9ca3af;margin-top:2px;">118 ccf √ó $0.499/ccf (best fixed rate example)</div></div>
        <div style="font-weight:700;white-space:nowrap;">$58.88</div>
      </div>
      <div style="display:flex;justify-content:space-between;padding:10px 20px;border-bottom:1px solid #f3f4f6;font-size:0.85rem;gap:12px;">
        <div><div style="color:#374151;">Sales Tax on Supply</div><div style="font-size:0.72rem;color:#9ca3af;margin-top:2px;">Applied to the gas commodity only.</div></div>
        <div style="font-weight:700;white-space:nowrap;">$4.71</div>
      </div>
      <div style="display:flex;justify-content:space-between;padding:12px 20px;font-weight:800;font-size:0.95rem;background:#f0fdf4;color:#14532d;border-top:2px solid #bbf7d0;">
        <span>Supply Subtotal</span><span>$63.59</span>
      </div>
      <div style="padding:12px 20px;font-size:0.78rem;background:#fefce8;border-top:1px solid #fde68a;">
        <strong style="color:#78350f;">If on default SCO ($1.071/ccf):</strong><br>
        118 ccf √ó $1.071 + tax ‚âà <strong style="color:#dc2626;">$133.88</strong><br>
        vs. $63.59 on fixed ‚Äî <strong style="color:#16a34a;">saving ~$70/month</strong>
      </div>
    </div>
  </div>

  <p style="font-size:0.78rem;color:#9ca3af;margin:12px 0 24px;font-style:italic;">Example based on a real Columbia Gas of Ohio bill at 118 ccf/month. Your charges vary by usage and rate class.</p>

  <h3 style="font-size:1.05rem;font-weight:800;margin-bottom:10px;color:#1e3a8a;">What are those "rider" charges?</h3>
  <p style="font-size:0.9rem;color:#374151;line-height:1.65;margin-bottom:16px;">Riders are PUCO-approved fees for infrastructure programs every Ohio utility runs. The names differ by utility but the concept is identical: mandatory charges for replacing aging pipelines, meeting federal safety requirements, and funding system upgrades. <strong>Switching suppliers never eliminates riders.</strong></p>

  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(190px,1fr));gap:12px;margin-bottom:20px;">
    <div style="background:#f8f9fa;border-radius:10px;padding:14px 16px;border-left:3px solid #bfdbfe;">
      <h5 style="font-size:0.78rem;font-weight:700;color:#1e3a8a;margin-bottom:5px;">Infrastructure Replacement Program Rider</h5>
      <p style="font-size:0.74rem;color:#6b7280;line-height:1.45;margin:0 0 4px;">Replaces older cast iron and bare steel gas distribution pipes across Ohio.</p>
      <div style="font-size:0.7rem;font-weight:700;color:#374151;">~$5.33/mo</div>
    </div>
    <div style="background:#f8f9fa;border-radius:10px;padding:14px 16px;border-left:3px solid #bfdbfe;">
      <h5 style="font-size:0.78rem;font-weight:700;color:#1e3a8a;margin-bottom:5px;">PHMSA Infrastructure Rider</h5>
      <p style="font-size:0.74rem;color:#6b7280;line-height:1.45;margin:0 0 4px;">Federal pipeline safety compliance requirements.</p>
      <div style="font-size:0.7rem;font-weight:700;color:#374151;">~$0.46/mo</div>
    </div>
    <div style="background:#f8f9fa;border-radius:10px;padding:14px 16px;border-left:3px solid #bfdbfe;">
      <h5 style="font-size:0.78rem;font-weight:700;color:#1e3a8a;margin-bottom:5px;">Capital Expenditure Program Rider</h5>
      <p style="font-size:0.74rem;color:#6b7280;line-height:1.45;margin:0 0 4px;">Major system improvements approved by PUCO.</p>
      <div style="font-size:0.7rem;font-weight:700;color:#374151;">~$6.14/mo</div>
    </div>
    <div style="background:#f8f9fa;border-radius:10px;padding:14px 16px;border-left:3px solid #bfdbfe;">
      <h5 style="font-size:0.78rem;font-weight:700;color:#1e3a8a;margin-bottom:5px;">Infrastructure Development Rider</h5>
      <p style="font-size:0.74rem;color:#6b7280;line-height:1.45;margin:0 0 4px;">New gas line extensions and system expansion.</p>
      <div style="font-size:0.7rem;font-weight:700;color:#374151;">~$0.87/mo</div>
    </div>
  </div>

  <div style="padding:14px 18px;background:#f8f9fa;border-radius:10px;font-size:0.83rem;color:#555;line-height:1.6;border-left:3px solid #d1d5db;">
    <strong>The bottom line:</strong> The <em>only</em> line that changes when you switch suppliers is the <strong>supply cost</strong>. Delivery, riders, and taxes all stay identical. With the SCO at $1.071/ccf today, that one line is costing the average Ohio household $50‚Äì$100/month more than it needs to.
  </div>
</div>

<hr class="section-divider">

<div class="chart-section" id="history-chart">
  <div class="chart-inner">
    <div class="section-num">Section 4</div>
    <h2>Ohio Gas Rate History</h2>
    <p>See how SCO rates have moved over time ‚Äî and why locking in a fixed rate can protect you from spikes.</p>

    <div class="time-btns">
      <button class="time-btn" data-range="6m">6M</button>
      <button class="time-btn" data-range="1y">1Y</button>
      <button class="time-btn active" data-range="5y">5Y</button>
      <button class="time-btn" data-range="10y">10Y</button>
      <button class="time-btn" data-range="all">All</button>
    </div>

    <div style="position:relative;height:420px;max-height:50vh;">
      <canvas id="learn-rate-chart"></canvas>
    </div>
    <p class="chart-source">Source: PUCO official SCO historical charts. EIA Ohio Residential data used for pre-2018 reference.</p>
  </div>
</div>

<!-- SECTION 4: PRICE SPIKES -->
<div class="content-section" id="price-spikes">
  <div class="section-num">Section 5</div>
  <h2>What Happened in 2022 (and Why It's Happening Again)</h2>
  <p>In early 2022, Russia's invasion of Ukraine sent global natural gas markets into chaos. European countries scrambled for liquefied natural gas (LNG), which drove up demand and prices worldwide. Ohio SCO rates hit <strong>$1.10/ccf in September 2022</strong> ‚Äî roughly 4√ó the COVID-era lows.</p>
  <p>Through 2023 and 2024, prices fell back to a more normal $0.32‚Äì$0.50/ccf range as markets stabilized.</p>
  <p>Then it happened again. In the 2025‚Äì2026 heating season:</p>
  <ul>
    <li>PUCO's RPA auction produced a 96% increase in the Retail Price Adjustment</li>
    <li>Winter Storm Fern (January 2026) caused a sharp NYMEX price spike</li>
    <li>Columbia Gas SCO jumped to <strong>$1.071/ccf</strong></li>
  </ul>

  <div class="info-box yellow">
    <strong>This is a structural problem, not a one-time event.</strong>
    The SCO rate is exposed to both commodity market volatility (NYMEX) and supplier auction dynamics (RPA). As long as you're on the SCO, your bill is at the mercy of both. A fixed-rate plan eliminates this uncertainty for the length of your contract.
  </div>
</div>

<hr class="section-divider">

<!-- SECTION 5: GOVERNMENT AGGREGATION -->
<div class="content-section" id="aggregation">
  <div class="section-num">Section 6</div>
  <h2>Government Aggregation</h2>
  <p>Ohio law allows municipalities and townships to aggregate the buying power of all residents and negotiate a group gas or electric rate. This is called <strong>Governmental Aggregation</strong>.</p>
  <ul>
    <li>Your local government negotiates a single rate on behalf of all eligible residents</li>
    <li>You're automatically enrolled but can always opt out</li>
    <li>Some aggregation programs offer better rates than you'd get shopping individually</li>
    <li>Many Greater Cleveland, Columbus, and Cincinnati suburbs have active programs</li>
  </ul>
  <p>Check if your municipality has a program by contacting your local government or calling PUCO at <strong>(800) 686-7826</strong>. Look for a "Governmental Aggregation" notice on your bill.</p>

  <div class="info-box green">
    <strong>Already in an aggregation program?</strong>
    You may already have a better rate than the default SCO. Check your bill ‚Äî if you see a supplier name other than your utility, you're either in an aggregation program or have previously chosen a supplier. You can still opt out and shop individually if you find a better deal.
  </div>
</div>

<hr class="section-divider">

<!-- SECTION 6: YOUR RIGHTS -->
<div class="content-section" id="rights">
  <div class="section-num">Section 7</div>
  <h2>Understanding Your Rights as a Shopper</h2>
  <p>Before signing with any natural gas supplier, ask these questions:</p>
  <ul class="checklist">
    <li>Is this rate <strong>fixed or variable</strong>? For how long?</li>
    <li>What is the <strong>Early Termination Fee (ETF)</strong>?</li>
    <li>Are there <strong>monthly fees</strong> beyond the per-ccf rate?</li>
    <li>What happens at contract end ‚Äî do I <strong>auto-renew</strong> at a new rate?</li>
    <li>Is this a <strong>promotional/intro rate</strong> that changes after month 1?</li>
    <li>Is any portion of this <strong>renewable energy</strong>?</li>
    <li>Is this rate available to me as a Columbia Gas / Enbridge / CenterPoint customer?</li>
  </ul>

  <div class="info-box yellow">
    <strong>Watch out for intro/teaser rates.</strong>
    Some suppliers advertise a very low price that only lasts for the first month, then switches to a market-based variable rate. Always confirm the rate that applies for the full contract term.
  </div>
</div>

<hr class="section-divider">

<!-- SECTION 7: HOW TO SWITCH -->
<div class="content-section" id="how-to-switch">
  <div class="section-num">Section 8</div>
  <h2>Steps to Switch Suppliers</h2>
  <ol class="steps-list">
    <li><strong>Know your current supplier and rate.</strong> Check your bill ‚Äî it's listed in the Supply section.</li>
    <li><strong>Know your usage.</strong> Find your average ccf/month on your bill. This determines your actual savings.</li>
    <li><strong>Compare rates</strong> at <a href="https://energychoice.ohio.gov" target="_blank" style="color:#1565c0;">energychoice.ohio.gov</a> or <a href="https://ohioratewatch.com" style="color:#1565c0;">ohioratewatch.com</a>.</li>
    <li><strong>Check contract terms:</strong> ETF, monthly fees, term length, promo vs. locked rate.</li>
    <li><strong>Calculate true monthly cost:</strong> (rate √ó your ccf) + monthly fee.</li>
    <li><strong>Contact the supplier</strong> or sign up online. Have your utility account number ready.</li>
    <li><strong>Wait 1‚Äì2 billing cycles</strong> for the switch to take effect. There's no service interruption.</li>
    <li><strong>Mark your contract end date on your calendar.</strong></li>
    <li><strong>Review your rate at expiration</strong> ‚Äî don't let it silently roll over to a variable rate.</li>
  </ol>
</div>

<hr class="section-divider">

<!-- SECTION 8: GLOSSARY -->
<div class="content-section" id="glossary">
  <div class="section-num">Section 9</div>
  <h2>Glossary</h2>
  <p>Plain-English definitions ‚Äî no jargon.</p>
  <div class="glossary">
    <div class="glossary-item">
      <div class="glossary-term">SCO (Standard Choice Offer)</div>
      <div class="glossary-def">The default gas rate you pay if you don't pick a supplier. Set monthly by PUCO based on market prices.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">SSO (Standard Service Offer)</div>
      <div class="glossary-def">Same as SCO but for customers transitioning back from a supplier. Usually lasts 1‚Äì2 billing cycles.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">NYMEX</div>
      <div class="glossary-def">The commodity exchange that sets the daily national price of natural gas ‚Äî like a stock market for gas.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">RPA (Retail Price Adjustment)</div>
      <div class="glossary-def">The supplier's cost to actually get gas to your utility's system. Set quarterly via competitive auction.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">CCF</div>
      <div class="glossary-def">100 cubic feet of natural gas. Your bill is priced in $/ccf. (Enbridge uses $/Mcf = 1,000 cubic feet ‚Äî divide by 10 to compare.)</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">Fixed Rate</div>
      <div class="glossary-def">A locked price per ccf for the length of your contract. Your commodity cost doesn't change with the market.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">Variable Rate</div>
      <div class="glossary-def">A rate that changes monthly with the market. Could be good or bad depending on timing.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">ETF (Early Termination Fee)</div>
      <div class="glossary-def">A penalty for canceling your contract early. Typically $50‚Äì$200.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">Government Aggregation</div>
      <div class="glossary-def">A program where your local government negotiates a group gas/electric rate for residents.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">PUCO</div>
      <div class="glossary-def">Public Utilities Commission of Ohio. Regulates utilities and certifies suppliers.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">GCR (Gas Cost Recovery)</div>
      <div class="glossary-def">Duke Energy Ohio's current rate-setting method (different from SCO). Duke moves to SCO in April 2026.</div>
    </div>
    <div class="glossary-item">
      <div class="glossary-term">Henry Hub</div>
      <div class="glossary-def">The benchmark natural gas pricing point in Louisiana. NYMEX prices track this closely.</div>
    </div>
  </div>
</div>

<hr class="section-divider">

<!-- SECTION 9: RESOURCES -->
<div class="content-section" id="resources">
  <div class="section-num">Section 9</div>
  <h2>PUCO &amp; Official Resources</h2>
  <div class="resource-grid">
    <div class="resource-card">
      <h4>Energy Choice Ohio</h4>
      <p>Compare current certified supplier rates for your utility.</p>
      <a href="https://energychoice.ohio.gov" target="_blank">energychoice.ohio.gov ‚Üí</a>
    </div>
    <div class="resource-card">
      <h4>Columbia Gas SCO History</h4>
      <p>Official PUCO historical SCO rate charts for Columbia Gas of Ohio.</p>
      <a href="https://puco.ohio.gov/utilities/gas/resources/columbia-gas-sco-historical-charts" target="_blank">View charts ‚Üí</a>
    </div>
    <div class="resource-card">
      <h4>Enbridge Gas Ohio SCO History</h4>
      <p>Official PUCO historical SCO rate charts for Enbridge Gas Ohio.</p>
      <a href="https://puco.ohio.gov/utilities/gas/resources/enbridge-gas-ohio-sco-historical-chart" target="_blank">View charts ‚Üí</a>
    </div>
    <div class="resource-card">
      <h4>CenterPoint Energy SCO History</h4>
      <p>Official PUCO historical SCO rate charts for CenterPoint Energy Ohio.</p>
      <a href="https://puco.ohio.gov/utilities/gas/resources/centerpoint-energy-sco-historical-chart" target="_blank">View charts ‚Üí</a>
    </div>
    <div class="resource-card">
      <h4>PUCO Contact</h4>
      <p>Questions about your utility or supplier? Call the PUCO.</p>
      <a href="tel:8006867826">(800) 686-7826</a>
    </div>
    <div class="resource-card">
      <h4>Ohio Consumers' Counsel</h4>
      <p>Independent advocate for Ohio residential utility consumers.</p>
      <a href="https://occ.ohio.gov" target="_blank">occ.ohio.gov ‚Üí</a>
    </div>
    <div class="resource-card">
      <h4>Energy Assistance Programs</h4>
      <p>Help with utility bills: HEAP, PIPP+, LIHEAP.</p>
      <a href="https://puco.ohio.gov" target="_blank">Learn about assistance ‚Üí</a>
    </div>
    <div class="resource-card">
      <h4>Rate Change Alerts</h4>
      <p>Sign up for PUCO notifications when rates change.</p>
      <a href="https://puco.ohio.gov" target="_blank">Sign up at puco.ohio.gov ‚Üí</a>
    </div>
  </div>
</div>

<!-- FOOTER CTA -->
<div class="footer-cta">
  <h2>Ready to compare rates?</h2>
  <p>Get free alerts when better rates become available for your area. No spam, unsubscribe anytime.</p>
  <form class="signup-form" id="footer-form">
    <input type="email" id="footer-email" placeholder="Your email address" required>
    <input type="text" class="zip" id="footer-zip" placeholder="Zip" maxlength="5">
    <button type="submit" id="footer-btn">Get Free Alerts ‚Üí</button>
  </form>
  <div id="footer-msg" style="margin-top:12px;font-weight:600;"></div>
  <p style="margin-top:16px;font-size:0.9rem;"><a href="/" style="color:#ffcc02;text-decoration:none;font-weight:700;">‚Üê Back to ohioratewatch.com</a></p>
</div>

<footer>
  <strong>OhioRateWatch.com</strong> ¬∑ A project of EJ Systems LLC ¬∑ Cleveland, Ohio ¬∑ <a href="tel:8334317283">833.431.RATE</a><br>
  <br>
  Rate data sourced from <a href="https://www.energychoice.ohio.gov" target="_blank">PUCO Energy Choice Ohio</a>. Not affiliated with any supplier, Columbia Gas, or any utility company.<br>
  Always verify current rates, terms, and fees directly with suppliers before switching service.<br>
  <br>
  Questions or concerns? Contact the <a href="https://www.puco.ohio.gov" target="_blank">Public Utilities Commission of Ohio (PUCO)</a> at 1-800-686-7826
  or the <a href="https://www.pickocc.org" target="_blank">Ohio Consumers' Counsel (OCC)</a> at 1-877-742-5622.
</footer>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.1.0/dist/chartjs-plugin-annotation.min.js"></script>
<script>
(function() {
  'use strict';

  const COLORS = {
    columbia:    '#e53935',
    enbridge:    '#7b1fa2',
    centerpoint: '#f57c00',
    eiaRef:      '#9ca3af',
    henryHub:    '#1565c0',
    bestFixed:   '#16a34a',
    grid:        '#f0f0f0',
    tooltipBg:   '#1a1a2e',
  };

  const MONTHS = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];

  let chartInstance = null;
  let fullData = null;
  let currentRange = '5y';

  function toMap(entries) {
    const m = {};
    (entries || []).forEach(d => { m[d.date] = d.value; });
    return m;
  }

  function fmtDate(label) {
    const [y, m] = (label || '').split('-');
    return MONTHS[parseInt(m) - 1] + ' ' + y;
  }

  function cutoffDate(range) {
    const now = new Date();
    switch (range) {
      case '6m':  now.setMonth(now.getMonth() - 6); break;
      case '1y':  now.setFullYear(now.getFullYear() - 1); break;
      case '5y':  now.setFullYear(now.getFullYear() - 5); break;
      case '10y': now.setFullYear(now.getFullYear() - 10); break;
      case 'all': return '1999-01';
    }
    const y = now.getFullYear();
    const m = String(now.getMonth() + 1).padStart(2, '0');
    return y + '-' + m;
  }

  function buildChart(data, range) {
    const canvas = document.getElementById('learn-rate-chart');
    if (!canvas) return;

    const cutoff = cutoffDate(range);
    const longterm = range === '10y' || range === 'all';

    const colMap  = toMap(data.columbiaGasSco || data.sco);
    const engMap  = toMap(data.enbridgeGasSco);
    const cpeMap  = toMap(data.centerpointSco);
    const hhMap   = toMap(data.henryHub);
    const eiaMap  = toMap(data.eiaOhioRef);

    const allDates = Array.from(new Set([
      ...Object.keys(colMap), ...Object.keys(engMap), ...Object.keys(cpeMap),
      ...Object.keys(hhMap), ...Object.keys(eiaMap),
    ])).filter(d => d >= cutoff).sort();

    const nullIfMissing = (map, d) => map[d] !== undefined ? map[d] : null;

    const datasets = [];

    // EIA reference for long-term views
    if (longterm && Object.keys(eiaMap).length > 0) {
      datasets.push({
        label: 'Ohio Residential Avg ‚Äî EIA (pre-2018 reference)',
        data: allDates.map(d => nullIfMissing(eiaMap, d)),
        borderColor: COLORS.eiaRef, backgroundColor: 'transparent',
        borderWidth: 1.5, pointRadius: 1, pointHoverRadius: 4,
        borderDash: [4, 2], fill: false, tension: 0.3, spanGaps: false,
      });
    }

    // Columbia Gas (always shown)
    datasets.push({
      label: 'Columbia Gas SCO ($/ccf)',
      data: allDates.map(d => nullIfMissing(colMap, d)),
      borderColor: COLORS.columbia, backgroundColor: 'rgba(229,57,53,0.07)',
      borderWidth: 2.5, pointRadius: longterm ? 1 : 2, pointHoverRadius: 6,
      pointBackgroundColor: COLORS.columbia, fill: true, tension: 0.3, spanGaps: false,
    });

    // Enbridge
    datasets.push({
      label: 'Enbridge Gas Ohio SCO ($/ccf)',
      data: allDates.map(d => nullIfMissing(engMap, d)),
      borderColor: COLORS.enbridge, backgroundColor: 'transparent',
      borderWidth: 1.8, pointRadius: 1.5, pointHoverRadius: 5,
      borderDash: [4, 3], fill: false, tension: 0.3, spanGaps: false,
    });

    // CenterPoint
    datasets.push({
      label: 'CenterPoint Energy SCO ($/ccf)',
      data: allDates.map(d => nullIfMissing(cpeMap, d)),
      borderColor: COLORS.centerpoint, backgroundColor: 'transparent',
      borderWidth: 1.8, pointRadius: 1.5, pointHoverRadius: 5,
      borderDash: [4, 3], fill: false, tension: 0.3, spanGaps: false,
    });

    // Henry Hub
    datasets.push({
      label: 'Henry Hub ($/ccf equiv.)',
      data: allDates.map(d => nullIfMissing(hhMap, d)),
      borderColor: COLORS.henryHub, backgroundColor: 'transparent',
      borderWidth: 1.5, pointRadius: 1, pointHoverRadius: 4,
      borderDash: [6, 4], fill: false, tension: 0.3, spanGaps: false,
    });

    // Build annotations
    const annotations = {};
    (data.events || []).forEach((evt, i) => {
      if (!allDates.includes(evt.date)) return;
      annotations['event' + i] = {
        type: 'line', xMin: evt.date, xMax: evt.date,
        borderColor: 'rgba(156,163,175,0.45)', borderWidth: 1, borderDash: [4, 4],
        label: {
          display: true, content: evt.icon + ' ' + evt.label, position: 'start',
          backgroundColor: 'rgba(255,255,255,0.92)', color: '#374151',
          font: { size: 10, weight: '600' }, padding: { top: 3, bottom: 3, left: 6, right: 6 },
          borderRadius: 4,
        }
      };
    });

    if (data.pucoBoundary && allDates.includes(data.pucoBoundary)) {
      annotations.pucoBoundary = {
        type: 'line', xMin: data.pucoBoundary, xMax: data.pucoBoundary,
        borderColor: 'rgba(107,114,128,0.6)', borderWidth: 2, borderDash: [6, 3],
        label: {
          display: true, content: 'üìã PUCO Official SCO data begins', position: 'end',
          backgroundColor: 'rgba(255,255,255,0.92)', color: '#374151',
          font: { size: 10, weight: '600' }, padding: { top: 3, bottom: 3, left: 6, right: 6 },
          borderRadius: 4,
        }
      };
    }

    if (data.bestFixed && data.bestFixed > 0.1) {
      annotations.bestFixed = {
        type: 'line', yMin: data.bestFixed, yMax: data.bestFixed,
        borderColor: COLORS.bestFixed, borderWidth: 2, borderDash: [8, 4],
        label: {
          display: true, content: 'Best Fixed: $' + Number(data.bestFixed).toFixed(3) + '/ccf',
          position: 'end', backgroundColor: COLORS.bestFixed, color: '#fff',
          font: { size: 11, weight: '700' }, padding: { top: 4, bottom: 4, left: 8, right: 8 },
          borderRadius: 4,
        }
      };
    }

    if (chartInstance) { chartInstance.destroy(); chartInstance = null; }

    chartInstance = new Chart(canvas, {
      type: 'line',
      data: { labels: allDates, datasets },
      options: {
        responsive: true, maintainAspectRatio: false,
        interaction: { mode: 'index', intersect: false },
        plugins: {
          legend: { position: 'top', labels: { usePointStyle: true, padding: 14, font: { size: 11, weight: '600' } } },
          tooltip: {
            backgroundColor: COLORS.tooltipBg, titleFont: { size: 13, weight: '700' },
            bodyFont: { size: 12 }, padding: 12, cornerRadius: 8,
            filter: ctx => ctx.parsed.y !== null,
            callbacks: {
              title: items => fmtDate(items[0].label),
              label: ctx => ctx.parsed.y === null ? null : ctx.dataset.label.split(' (')[0] + ': $' + ctx.parsed.y.toFixed(3) + '/ccf',
            },
          },
          annotation: { annotations },
        },
        scales: {
          x: {
            grid: { display: false },
            ticks: {
              font: { size: 10 }, color: '#9ca3af', maxRotation: 45,
              callback: function(val) {
                const label = this.getLabelForValue(val);
                if (typeof label !== 'string') return '';
                const [, m] = label.split('-');
                if (longterm) return m === '01' ? fmtDate(label) : '';
                return (m === '01' || m === '07') ? fmtDate(label) : '';
              },
            },
          },
          y: {
            beginAtZero: false, min: 0.10,
            grid: { color: COLORS.grid },
            ticks: { font: { size: 11 }, color: '#9ca3af', callback: val => '$' + val.toFixed(2) },
            title: { display: true, text: '$/ccf', font: { size: 12, weight: '600' }, color: '#6b7280' },
          },
        },
      },
    });
  }

  async function init() {
    // Fetch longterm data (superset) once
    try {
      const res = await fetch('/api/history/chart-data?range=longterm');
      fullData = await res.json();
    } catch (err) {
      console.error('Chart data unavailable:', err);
      document.getElementById('learn-rate-chart').parentElement.innerHTML =
        '<p style="color:#999;text-align:center;padding:40px;">Chart data unavailable. Please try again later.</p>';
      return;
    }

    buildChart(fullData, '5y');

    // Wire up time range buttons
    document.querySelectorAll('.time-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const range = this.dataset.range;
        if (range === currentRange) return;
        currentRange = range;
        document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
        buildChart(fullData, range);
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
})();
</script>

<script>
  async function subscribe(email, zip, btn, msgEl) {
    btn.disabled = true; btn.textContent = 'Signing up...'; msgEl.textContent = '';
    try {
      const res = await fetch('/api/subscribe', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ email, zip }) });
      const data = await res.json();
      if (res.ok) { msgEl.textContent = "‚úì You're on the list!"; msgEl.style.color = '#a5d6a7'; btn.closest('form').reset(); }
      else throw new Error(data.error || 'Something went wrong');
    } catch (err) { msgEl.textContent = '‚úó ' + (err.message || 'Please try again.'); msgEl.style.color = '#ef9a9a'; }
    finally { btn.disabled = false; btn.textContent = 'Get Free Alerts ‚Üí'; }
  }
  document.getElementById('footer-form').addEventListener('submit', e => {
    e.preventDefault();
    subscribe(document.getElementById('footer-email').value, document.getElementById('footer-zip').value, document.getElementById('footer-btn'), document.getElementById('footer-msg'));
  });
</script>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
<script>
window.addEventListener('load', function() {
  // Complete county ‚Üí utility mapping ‚Äî PUCO + Safe Gas Ohio (Sep 2025)
  const COUNTY_UTILITY = {
    // Enbridge Gas Ohio ‚Äî NE Ohio (former Dominion East Ohio)
    'Ashtabula':'enbridge','Lake':'enbridge','Cuyahoga':'enbridge','Geauga':'enbridge',
    'Trumbull':'enbridge','Mahoning':'enbridge','Portage':'enbridge','Summit':'enbridge',
    'Medina':'enbridge','Lorain':'enbridge','Stark':'enbridge','Carroll':'enbridge',
    'Columbiana':'enbridge','Jefferson':'enbridge','Harrison':'enbridge',
    // CenterPoint Energy Ohio ‚Äî SW Ohio / Dayton metro (former Vectren)
    'Montgomery':'centerpoint','Greene':'centerpoint','Clark':'centerpoint',
    'Miami':'centerpoint','Champaign':'centerpoint','Darke':'centerpoint','Preble':'centerpoint',
    // Duke Energy Ohio ‚Äî Cincinnati metro (moving to SCO April 2026)
    'Hamilton':'duke','Butler':'duke','Clermont':'duke','Warren':'duke',
    'Brown':'duke','Clinton':'duke','Highland':'duke',
    // Columbia Gas of Ohio ‚Äî all remaining 59 counties
    'Adams':'columbia','Allen':'columbia','Ashland':'columbia','Athens':'columbia',
    'Auglaize':'columbia','Belmont':'columbia','Coshocton':'columbia','Crawford':'columbia',
    'Defiance':'columbia','Delaware':'columbia','Erie':'columbia','Fairfield':'columbia',
    'Fayette':'columbia','Franklin':'columbia','Fulton':'columbia','Gallia':'columbia',
    'Guernsey':'columbia','Hancock':'columbia','Hardin':'columbia','Henry':'columbia',
    'Hocking':'columbia','Holmes':'columbia','Huron':'columbia','Jackson':'columbia',
    'Knox':'columbia','Lawrence':'columbia','Licking':'columbia','Logan':'columbia',
    'Lucas':'columbia','Madison':'columbia','Marion':'columbia','Meigs':'columbia',
    'Mercer':'columbia','Monroe':'columbia','Morgan':'columbia','Morrow':'columbia',
    'Muskingum':'columbia','Noble':'columbia','Ottawa':'columbia','Paulding':'columbia',
    'Perry':'columbia','Pickaway':'columbia','Pike':'columbia','Putnam':'columbia',
    'Richland':'columbia','Ross':'columbia','Sandusky':'columbia','Scioto':'columbia',
    'Seneca':'columbia','Shelby':'columbia','Tuscarawas':'columbia','Union':'columbia',
    'Van Wert':'columbia','Vinton':'columbia','Washington':'columbia','Wayne':'columbia',
    'Williams':'columbia','Wood':'columbia','Wyandot':'columbia',
  };

  // Rural gas cooperatives ‚Äî customers in co-op areas CANNOT use Energy Choice
  // Source: PUCO Gas Pipeline Safety database (Sep 2025)
  const COUNTY_COOPS = {
    'Knox':       ['Knox Energy Cooperative'],
    'Ashland':    ['Knox Energy Cooperative'],
    'Morrow':     ['Knox Energy Cooperative'],
    'Richland':   ['Knox Energy Cooperative'],
    'Wayne':      ['Knox Energy Cooperative','Consumers Gas Cooperative'],
    'Holmes':     ['Consumers Gas Cooperative'],
    'Tuscarawas': ['Consumers Gas Cooperative'],
    'Medina':     ['Consumers Gas Cooperative'],
    'Stark':      ['Consumers Gas Cooperative'],
    'Madison':    ['Madison Energy Cooperative'],
    'Union':      ['Madison Energy Cooperative'],
    'Delaware':   ['Madison Energy Cooperative'],
    'Champaign':  ['Madison Energy Cooperative'],
    'Fayette':    ['Madison Energy Cooperative'],
    'Perry':      ['National Gas & Oil Cooperative'],
    'Hocking':    ['National Gas & Oil Cooperative'],
    'Morgan':     ['National Gas & Oil Cooperative'],
    'Vinton':     ['National Gas & Oil Cooperative'],
    'Noble':      ['National Gas & Oil Cooperative'],
    'Adams':      ['All American Energy Cooperative'],
    'Pike':       ['All American Energy Cooperative'],
    'Scioto':     ['All American Energy Cooperative'],
    'Geauga':     ['Consumers Gas Cooperative'],
    'Portage':    ['Consumers Gas Cooperative'],
    'Logan':      ['Community Energy Resources Cooperative'],
    'Ashtabula':  ['Village Energy Cooperative'],
    'Lorain':     ['Village Energy Cooperative'],
    'Licking':    ['Village Energy Cooperative'],
  };
  const UTILITY_INFO = {
    columbia:    { name:'Columbia Gas of Ohio',    color:'#1565c0', sco:'$1.071/ccf', customers:'~1.4M customers' },
    enbridge:    { name:'Enbridge Gas Ohio',       color:'#7b1fa2', sco:'$0.796/ccf equiv.', customers:'~1.2M customers' },
    centerpoint: { name:'CenterPoint Energy Ohio', color:'#f57c00', sco:'$1.02/ccf',  customers:'~320K customers' },
    duke:        { name:'Duke Energy Ohio',        color:'#16a34a', sco:'GCR rate (SCO April 2026)', customers:'~130K customers' }
  };

  function getUtility(name) {
    return COUNTY_UTILITY[name] || 'columbia';
  }
  function getCoops(name) {
    return COUNTY_COOPS[name] || [];
  }

  var map = L.map('ohio-map', {
    zoomControl: false, attributionControl: false, dragging: false,
    scrollWheelZoom: false, doubleClickZoom: false, touchZoom: false,
    boxZoom: false, keyboard: false
  });

  var geojsonLayer;

  function defaultStyle(feature) {
    var u = getUtility(feature.properties.NAME);
    return {
      fillColor: UTILITY_INFO[u].color,
      fillOpacity: 0.7,
      weight: 0.8,
      color: '#fff'
    };
  }

  function highlightStyle(feature) {
    var u = getUtility(feature.properties.NAME);
    return {
      fillColor: UTILITY_INFO[u].color,
      fillOpacity: 0.95,
      weight: 2,
      color: '#333'
    };
  }

  fetch('/ohio-counties.geojson')
    .then(function(r) { return r.json(); })
    .then(function(data) {
      geojsonLayer = L.geoJSON(data, {
        style: defaultStyle,
        onEachFeature: function(feature, layer) {
          var name = feature.properties.NAME;
          var uKey = getUtility(name);
          var info = UTILITY_INFO[uKey];
          var coops = getCoops(name);
          var coopTip = coops.length ? '<br><span style="font-size:0.75em;color:#b45309;">‚ö† Co-op area in county</span>' : '';
          layer.bindTooltip(
            '<strong>' + name + ' County</strong><br>' + info.name +
            '<br><span style="font-size:0.8em;color:#666;">' + info.customers + '</span>' + coopTip,
            { sticky: true, className: 'county-tooltip' }
          );
          layer.on('mouseover', function(e) {
            e.target.setStyle(highlightStyle(feature));
            e.target.bringToFront();
          });
          layer.on('mouseout', function(e) {
            geojsonLayer.resetStyle(e.target);
          });
          layer.on('click', function() {
            var territory = uKey === 'columbia' ? 'columbia' : uKey === 'enbridge' ? 'enbridge' : uKey === 'centerpoint' ? 'centerpoint' : 'duke';
            layer.bindPopup('<strong>' + info.name + '</strong><br>Current rate: ' + info.sco + '<br>' + info.customers + '<br><a href="/?territory=' + territory + '" style="color:#1565c0;font-weight:600;">Compare rates ‚Üí</a>').openPopup();
          });
        }
      }).addTo(map);
      map.fitBounds(geojsonLayer.getBounds(), { padding: [10, 10] });
      setTimeout(function(){ map.invalidateSize(); }, 150);
    });

  // ZIP code lookup
  window.lookupZip = function() {
    var zip = document.getElementById('zip-input').value.trim();
    var resultDiv = document.getElementById('zip-result');
    if (!zip.match(/^\d{5}$/)) {
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = '<span style="color:#dc2626;">Please enter a valid 5-digit ZIP code.</span>';
      return;
    }
    resultDiv.style.display = 'block';
    resultDiv.innerHTML = '<span style="color:#6b7280;">Looking up‚Ä¶</span>';

    fetch('https://nominatim.openstreetmap.org/search?postalcode=' + zip + '&country=US&format=json&addressdetails=1&limit=3',
      { headers: { 'Accept': 'application/json' } })
      .then(function(r) { return r.json(); })
      .then(function(data) {
        var ohioResult = null;
        for (var i = 0; i < data.length; i++) {
          if (data[i].address && data[i].address.state === 'Ohio') {
            ohioResult = data[i];
            break;
          }
        }
        if (!ohioResult) {
          resultDiv.innerHTML = '<span style="color:#dc2626;">That ZIP code doesn\u2019t appear to be in Ohio. Ohio Rate Watch covers Ohio utilities only.</span>';
          return;
        }
        var addr = ohioResult.address;
        var rawCounty = addr.county || addr.city_district || '';
        var county = rawCounty.replace(' County', '').trim();
        var uKey = getUtility(county);
        var info = UTILITY_INFO[uKey];

        // Highlight the county on the map
        if (geojsonLayer) {
          geojsonLayer.eachLayer(function(layer) {
            if (layer.feature.properties.NAME === county) {
              geojsonLayer.resetStyle(layer);
              layer.setStyle({ fillColor: info.color, fillOpacity: 1.0, weight: 3, color: '#333' });
              layer.bringToFront();
              map.fitBounds(layer.getBounds(), { padding: [40, 40], maxZoom: 8 });
            } else {
              layer.setStyle({ fillColor: UTILITY_INFO[getUtility(layer.feature.properties.NAME)].color, fillOpacity: 0.35, weight: 0.5, color: '#fff' });
            }
          });
        }

        var localCoops = getCoops(county);
        var coopBox = localCoops.length
          ? '<div style="margin-top:8px;padding:8px 10px;background:#fef3c7;border:1px solid #f59e0b;border-radius:6px;font-size:0.8rem;">'
            + '<strong>‚ö† Rural cooperative also serves this county</strong><br>'
            + localCoops.join(', ') + '. If your bill is from a cooperative, Energy Choice does not apply ‚Äî you cannot switch suppliers.'
            + '</div>'
          : '';
        var rateHtml = uKey === 'duke'
          ? '<span style="color:#6b7280;">GCR rate (moving to SCO April 2026)</span>'
          : 'Current SCO: <strong>' + info.sco + '</strong>';

        resultDiv.innerHTML =
          '<div style="display:flex;align-items:flex-start;gap:10px;">' +
          '<span style="width:14px;height:14px;border-radius:3px;background:' + info.color + ';display:inline-block;flex-shrink:0;margin-top:2px;"></span>' +
          '<div><strong>' + county + ' County</strong> is served by <strong>' + info.name + '</strong>.<br>' +
          rateHtml + '<br>' +
          '<span style="color:#6b7280;font-size:0.8rem;">Some areas may have overlapping service ‚Äî verify on your gas bill.</span></div></div>' +
          '<div style="margin-top:8px;"><a href="/?utility=' + uKey + '" style="color:#1565c0;font-weight:600;font-size:0.85rem;">Compare suppliers for ' + info.name + ' ‚Üí</a></div>';
      })
      .catch(function() {
        resultDiv.innerHTML = '<span style="color:#dc2626;">Lookup failed. Try again or check your utility bill directly.</span>';
      });
  };

  // Allow Enter key on zip input
  document.getElementById('zip-input').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') window.lookupZip();
  });

});
</script>
<style>.county-tooltip{font-size:0.85rem;line-height:1.4;padding:6px 10px;border-radius:6px;}</style>

</body>
</html>